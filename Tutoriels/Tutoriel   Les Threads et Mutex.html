<!DOCTYPE html>
<html xmlns:og="http://ogp.me/ns#" wtx-context="26E91007-000C-4997-A5D6-9C39FCD5324B" lang="fr"><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252">
	<meta charset="iso-8859-1">
	<title>Initiation à la programmation multitâche en C avec Pthreads</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	<meta name="format-detection" content="telephone=no">
	<meta name="generator" content="developpez-com">
	<meta name="description" content="Initiation à la programmation multitâche en C avec Pthreads">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Initiation à la programmation multitâche en C avec Pthreads">
	<meta property="og:image" content="https://www.developpez.com/template/images/logo.png">
	<meta property="og:url" content="http://franckh.developpez.com/tutoriels/posix/pthreads/">
	<meta property="og:locale" content="fr_FR">
	<meta property="og:site_name" content="Developpez.com">
	<meta property="twitter:card" content="summary">
	<meta property="twitter:url" content="http://franckh.developpez.com/tutoriels/posix/pthreads/">
	<meta property="twitter:description" content="Initiation à la programmation multitâche en C avec Pthreads">
	<meta property="twitter:title" content="Initiation à la programmation multitâche en C avec Pthreads">
	<meta property="twitter:image" content="https://www.developpez.com/template/images/logo.png">
	<script type="text/javascript" async="" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/ga.js"></script><script type="text/javascript" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/jquery-1.js"></script>
	<script async="" type="text/javascript" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/a"></script>
	<script async="async" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/gpt.js"></script>
	<script>
		var googletag = googletag || {};
		googletag.cmd = googletag.cmd || [];
	</script>
	<script async="" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/adsbygoogle.js"></script>
	<link rel="shortcut icon" type="image/x-icon" href="https://franckh.developpez.com/template/favicon.ico">
	<link rel="image_src" href="https://www.developpez.com/facebook-icon.png">
	<link rel="stylesheet" type="text/css" href="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/gabarit.css">
	<link rel="stylesheet" type="text/css" media="print" href="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/printer.css">
	<link rel="stylesheet" type="text/css" href="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/gabarit-mobile.css">
	<script type="text/javascript" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/gabarit-mobile.js"></script>
	<link rel="stylesheet" type="text/css" media="screen" href="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/developpez-kit-generation.css">
	<link rel="stylesheet" type="text/css" media="screen" href="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/code.css">
	<link rel="stylesheet" type="text/css" media="screen" href="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/lightbox.css">
	<script type="text/javascript" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/developpez-kit-generation.js"></script>
	<script type="text/javascript" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/lightbox.js"></script>
	<script type="text/javascript" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/fonctions-kit.js"></script>
	<meta name="author" content="Franck Hecht">
	<!--[if lt IE 7]>
	<script src="/template/ie7/IE7.js" type="text/javascript"></script>
	<![endif]-->

	<!--[if IE 6]>
	<link rel="stylesheet" type="text/css" href="/template/gabarit-ie6.css" />
	<![endif]-->

	<!--[if IE 7]>
	<link rel="stylesheet" type="text/css" href="/template/gabarit-ie7.css" />
	<![endif]-->

	<!--[if lt IE 9]>
	<script type="text/javascript" src="/template/kit/html5_ie.js"></script>
	<![endif]-->
	<!--[if IE 9]><link rel="stylesheet" type="text/css" href="/template/kit/ie9.css" /><![endif]-->
	<!--[if IE 8]><link rel="stylesheet" type="text/css" href="/template/kit/ie8.css" /><![endif]-->
	<!--[if lt IE 9]><link rel="stylesheet" type="text/css" href="/template/kit/ie.css" /><![endif]-->
	<!--[if IE 7]><link rel="stylesheet" type="text/css" href="/template/kit/ie7.css" /><![endif]-->
	<!--[if lte IE 6]><link rel="stylesheet" type="text/css" href="/template/kit/ie6.css" /><![endif]-->
	<!--[if lt IE 9]><script type="text/javascript" src="/template/kit/html5_ie.js"></script><![endif]-->

<script src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/secureAnonymousFramework"></script><style type="text/css">* html #li_ui_li_gen_1546098566082_0 a#li_ui_li_gen_1546098566082_0-link{height:1% !important;}#li_ui_li_gen_1546098566082_0{position:relative !important;overflow:visible !important;display:block !important;}#li_ui_li_gen_1546098566082_0 span{-webkit-box-sizing:content-box !important;-moz-box-sizing:content-box !important;box-sizing:content-box !important;}#li_ui_li_gen_1546098566082_0 a#li_ui_li_gen_1546098566082_0-link{border:0 !important;height:20px !important;text-decoration:none !important;padding:0 !important;margin:0 !important;display:inline-block !important;}#li_ui_li_gen_1546098566082_0 a#li_ui_li_gen_1546098566082_0-link:link, #li_ui_li_gen_1546098566082_0 a#li_ui_li_gen_1546098566082_0-link:visited, #li_ui_li_gen_1546098566082_0 a#li_ui_li_gen_1546098566082_0-link:hover, #li_ui_li_gen_1546098566082_0 a#li_ui_li_gen_1546098566082_0-link:active{border:0 !important;text-decoration:none !important;}#li_ui_li_gen_1546098566082_0 a#li_ui_li_gen_1546098566082_0-link:after{content:"." !important;display:block !important;clear:both !important;visibility:hidden !important;line-height:0 !important;height:0 !important;}#li_ui_li_gen_1546098566082_0 #li_ui_li_gen_1546098566082_0-logo{background-image:url(https://static.licdn.com/scds/common/u/images/apps/connect/sprites/sprite_connect_v14.png) !important;background-position:0px -593px !important;background-repeat:no-repeat !important;background-color:#0077b5 !important;background-size:initial !important;cursor:pointer !important;border:0 !important;border-right:1px solid #066094 !important;text-indent:-9999em !important;overflow:hidden !important;padding:0 !important;margin:0 !important;position:absolute !important;left:0px !important;top:0px !important;display:block !important;width:20px !important;height:20px !important;float:right !important;border-radius:2px !important;-moz-border-radius:2px !important;border-top-right-radius:2px !important;border-bottom-right-radius:2px !important;-moz-border-radius-topright:2px !important;-moz-border-radius-bottomright:2px !important;}#li_ui_li_gen_1546098566082_0 #li_ui_li_gen_1546098566082_0-title{color:#fff !important;cursor:pointer !important;display:block !important;white-space:nowrap !important;float:left !important;margin-left:1px !important;vertical-align:top !important;overflow:hidden !important;text-align:center !important;height:18px !important;padding:0 4px 0 23px !important;border:1px solid #000 !important;border-top-color:#0077b5 !important;border-right-color:#0077b5 !important;border-bottom-color:#0077b5 !important;border-left-color:#0077b5 !important;text-shadow:0 -1px #005887 !important;line-height:20px !important;border-radius:2px !important;-moz-border-radius:2px !important;border-top-right-radius:2px !important;border-bottom-right-radius:2px !important;-moz-border-radius-topright:2px !important;-moz-border-radius-bottomright:2px !important;background-color:#0077b5 !important;background-image:-moz-linear-gradient(top, #0077b5 0%, #0077b5 100%) !important;}#li_ui_li_gen_1546098566082_0.hovered #li_ui_li_gen_1546098566082_0-title{border:1px solid #000 !important;border-top-color:#0369a0 !important;border-right-color:#0369a0 !important;border-bottom-color:#0369a0 !important;border-left-color:#0369a0 !important;background-color:#0369a0 !important;background-image:-moz-linear-gradient(top, #0369a0 0%, #0369a0 100%) !important;}#li_ui_li_gen_1546098566082_0.clicked #li_ui_li_gen_1546098566082_0-title, #li_ui_li_gen_1546098566082_0.down #li_ui_li_gen_1546098566082_0-title{color:#fff !important;border:1px solid #000 !important;border-top-color:#066094 !important;border-right-color:#066094 !important;border-bottom-color:#066094 !important;border-left-color:#066094 !important;background-color:#066094 !important;background-image:-moz-linear-gradient(top, #066094 0%, #066094 100%) !important;}.IN-shadowed #li_ui_li_gen_1546098566082_0 #li_ui_li_gen_1546098566082_0-title{}.IN-shadowed #li_ui_li_gen_1546098566082_0.hovered #li_ui_li_gen_1546098566082_0-title{}.IN-shadowed #li_ui_li_gen_1546098566082_0.clicked #li_ui_li_gen_1546098566082_0-title, .IN-shadowed #li_ui_li_gen_1546098566082_0.down #li_ui_li_gen_1546098566082_0-title{}#li_ui_li_gen_1546098566082_0 #li_ui_li_gen_1546098566082_0-title-text, #li_ui_li_gen_1546098566082_0 #li_ui_li_gen_1546098566082_0-title-text *{color:#fff !important;font-size:11px !important;font-family:Arial, sans-serif !important;font-weight:bold !important;font-style:normal !important;-webkit-font-smoothing:antialiased !important;display:inline-block !important;background:transparent none !important;vertical-align:top !important;height:18px !important;line-height:20px !important;float:none !important;}#li_ui_li_gen_1546098566082_0 #li_ui_li_gen_1546098566082_0-title-text strong{font-weight:bold !important;}#li_ui_li_gen_1546098566082_0 #li_ui_li_gen_1546098566082_0-title-text em{font-style:italic !important;}#li_ui_li_gen_1546098566082_0.hovered #li_ui_li_gen_1546098566082_0-title-text, #li_ui_li_gen_1546098566082_0.hovered #li_ui_li_gen_1546098566082_0-title-text *{color:#fff !important;}#li_ui_li_gen_1546098566082_0.clicked #li_ui_li_gen_1546098566082_0-title-text, #li_ui_li_gen_1546098566082_0.down #li_ui_li_gen_1546098566082_0-title-text, #li_ui_li_gen_1546098566082_0.clicked #li_ui_li_gen_1546098566082_0-title-text *, #li_ui_li_gen_1546098566082_0.down #li_ui_li_gen_1546098566082_0-title-text *{color:#fff !important;}#li_ui_li_gen_1546098566082_0 #li_ui_li_gen_1546098566082_0-title #li_ui_li_gen_1546098566082_0-mark{display:inline-block !important;width:0px !important;overflow:hidden !important;}.success #li_ui_li_gen_1546098566082_0 #li_ui_li_gen_1546098566082_0-title{color:#fff !important;border-top-color:#0077b5 !important;border-right-color:#0077b5 !important;border-bottom-color:#0077b5 !important;border-left-color:#0077b5 !important;background-color:#0077b5 !important;background-image:-moz-linear-gradient(top, #0077b5 0%, #0077b5 100%) !important;}.success #li_ui_li_gen_1546098566082_0 #li_ui_li_gen_1546098566082_0-title-text, .success #li_ui_li_gen_1546098566082_0 #li_ui_li_gen_1546098566082_0-title-text *{color:#fff !important;}.IN-shadowed .success #li_ui_li_gen_1546098566082_0 #li_ui_li_gen_1546098566082_0-title{}.success #li_ui_li_gen_1546098566082_0.hovered #li_ui_li_gen_1546098566082_0-title{color:#fff !important;border-top-color:#0369a0 !important;border-right-color:#0369a0 !important;border-bottom-color:#0369a0 !important;border-left-color:#0369a0 !important;background-color:#0369a0 !important;background-image:-moz-linear-gradient(top, #0369a0 0%, #0369a0 100%) !important;}.success #li_ui_li_gen_1546098566082_0.hovered #li_ui_li_gen_1546098566082_0-title-text, .success #li_ui_li_gen_1546098566082_0.hovered #li_ui_li_gen_1546098566082_0-title-text *{color:#fff !important;}.success #li_ui_li_gen_1546098566082_0.clicked #li_ui_li_gen_1546098566082_0-title, .success #li_ui_li_gen_1546098566082_0.down #li_ui_li_gen_1546098566082_0-title{color:#fff !important;border-top-color:#066094 !important;border-right-color:#066094 !important;border-bottom-color:#066094 !important;border-left-color:#066094 !important;background-color:#066094 !important;background-image:-moz-linear-gradient(top, #066094 0%, #066094 100%) !important;}.success #li_ui_li_gen_1546098566082_0.clicked #li_ui_li_gen_1546098566082_0-title-text, .success #li_ui_li_gen_1546098566082_0.down #li_ui_li_gen_1546098566082_0-title-text, .success #li_ui_li_gen_1546098566082_0.clicked #li_ui_li_gen_1546098566082_0-title-text *, .success #li_ui_li_gen_1546098566082_0.down #li_ui_li_gen_1546098566082_0-title-text *{color:#fff !important;}.IN-shadowed .success #li_ui_li_gen_1546098566082_0.clicked #li_ui_li_gen_1546098566082_0-title, .IN-shadowed .success #li_ui_li_gen_1546098566082_0.down #li_ui_li_gen_1546098566082_0-title{}* html #li_ui_li_gen_1546098566105_1 a#li_ui_li_gen_1546098566105_1-link{height:1% !important;}#li_ui_li_gen_1546098566105_1{position:relative !important;overflow:visible !important;display:block !important;}#li_ui_li_gen_1546098566105_1 span{-webkit-box-sizing:content-box !important;-moz-box-sizing:content-box !important;box-sizing:content-box !important;}#li_ui_li_gen_1546098566105_1 a#li_ui_li_gen_1546098566105_1-link{border:0 !important;height:20px !important;text-decoration:none !important;padding:0 !important;margin:0 !important;display:inline-block !important;}#li_ui_li_gen_1546098566105_1 a#li_ui_li_gen_1546098566105_1-link:link, #li_ui_li_gen_1546098566105_1 a#li_ui_li_gen_1546098566105_1-link:visited, #li_ui_li_gen_1546098566105_1 a#li_ui_li_gen_1546098566105_1-link:hover, #li_ui_li_gen_1546098566105_1 a#li_ui_li_gen_1546098566105_1-link:active{border:0 !important;text-decoration:none !important;}#li_ui_li_gen_1546098566105_1 a#li_ui_li_gen_1546098566105_1-link:after{content:"." !important;display:block !important;clear:both !important;visibility:hidden !important;line-height:0 !important;height:0 !important;}#li_ui_li_gen_1546098566105_1 #li_ui_li_gen_1546098566105_1-logo{background-image:url(https://static.licdn.com/scds/common/u/images/apps/connect/sprites/sprite_connect_v14.png) !important;background-position:0px -593px !important;background-repeat:no-repeat !important;background-color:#0077b5 !important;background-size:initial !important;cursor:pointer !important;border:0 !important;border-right:1px solid #066094 !important;text-indent:-9999em !important;overflow:hidden !important;padding:0 !important;margin:0 !important;position:absolute !important;left:0px !important;top:0px !important;display:block !important;width:20px !important;height:20px !important;float:right !important;border-radius:2px !important;-moz-border-radius:2px !important;border-top-right-radius:2px !important;border-bottom-right-radius:2px !important;-moz-border-radius-topright:2px !important;-moz-border-radius-bottomright:2px !important;}#li_ui_li_gen_1546098566105_1 #li_ui_li_gen_1546098566105_1-title{color:#fff !important;cursor:pointer !important;display:block !important;white-space:nowrap !important;float:left !important;margin-left:1px !important;vertical-align:top !important;overflow:hidden !important;text-align:center !important;height:18px !important;padding:0 4px 0 23px !important;border:1px solid #000 !important;border-top-color:#0077b5 !important;border-right-color:#0077b5 !important;border-bottom-color:#0077b5 !important;border-left-color:#0077b5 !important;text-shadow:0 -1px #005887 !important;line-height:20px !important;border-radius:2px !important;-moz-border-radius:2px !important;border-top-right-radius:2px !important;border-bottom-right-radius:2px !important;-moz-border-radius-topright:2px !important;-moz-border-radius-bottomright:2px !important;background-color:#0077b5 !important;background-image:-moz-linear-gradient(top, #0077b5 0%, #0077b5 100%) !important;}#li_ui_li_gen_1546098566105_1.hovered #li_ui_li_gen_1546098566105_1-title{border:1px solid #000 !important;border-top-color:#0369a0 !important;border-right-color:#0369a0 !important;border-bottom-color:#0369a0 !important;border-left-color:#0369a0 !important;background-color:#0369a0 !important;background-image:-moz-linear-gradient(top, #0369a0 0%, #0369a0 100%) !important;}#li_ui_li_gen_1546098566105_1.clicked #li_ui_li_gen_1546098566105_1-title, #li_ui_li_gen_1546098566105_1.down #li_ui_li_gen_1546098566105_1-title{color:#fff !important;border:1px solid #000 !important;border-top-color:#066094 !important;border-right-color:#066094 !important;border-bottom-color:#066094 !important;border-left-color:#066094 !important;background-color:#066094 !important;background-image:-moz-linear-gradient(top, #066094 0%, #066094 100%) !important;}.IN-shadowed #li_ui_li_gen_1546098566105_1 #li_ui_li_gen_1546098566105_1-title{}.IN-shadowed #li_ui_li_gen_1546098566105_1.hovered #li_ui_li_gen_1546098566105_1-title{}.IN-shadowed #li_ui_li_gen_1546098566105_1.clicked #li_ui_li_gen_1546098566105_1-title, .IN-shadowed #li_ui_li_gen_1546098566105_1.down #li_ui_li_gen_1546098566105_1-title{}#li_ui_li_gen_1546098566105_1 #li_ui_li_gen_1546098566105_1-title-text, #li_ui_li_gen_1546098566105_1 #li_ui_li_gen_1546098566105_1-title-text *{color:#fff !important;font-size:11px !important;font-family:Arial, sans-serif !important;font-weight:bold !important;font-style:normal !important;-webkit-font-smoothing:antialiased !important;display:inline-block !important;background:transparent none !important;vertical-align:top !important;height:18px !important;line-height:20px !important;float:none !important;}#li_ui_li_gen_1546098566105_1 #li_ui_li_gen_1546098566105_1-title-text strong{font-weight:bold !important;}#li_ui_li_gen_1546098566105_1 #li_ui_li_gen_1546098566105_1-title-text em{font-style:italic !important;}#li_ui_li_gen_1546098566105_1.hovered #li_ui_li_gen_1546098566105_1-title-text, #li_ui_li_gen_1546098566105_1.hovered #li_ui_li_gen_1546098566105_1-title-text *{color:#fff !important;}#li_ui_li_gen_1546098566105_1.clicked #li_ui_li_gen_1546098566105_1-title-text, #li_ui_li_gen_1546098566105_1.down #li_ui_li_gen_1546098566105_1-title-text, #li_ui_li_gen_1546098566105_1.clicked #li_ui_li_gen_1546098566105_1-title-text *, #li_ui_li_gen_1546098566105_1.down #li_ui_li_gen_1546098566105_1-title-text *{color:#fff !important;}#li_ui_li_gen_1546098566105_1 #li_ui_li_gen_1546098566105_1-title #li_ui_li_gen_1546098566105_1-mark{display:inline-block !important;width:0px !important;overflow:hidden !important;}.success #li_ui_li_gen_1546098566105_1 #li_ui_li_gen_1546098566105_1-title{color:#fff !important;border-top-color:#0077b5 !important;border-right-color:#0077b5 !important;border-bottom-color:#0077b5 !important;border-left-color:#0077b5 !important;background-color:#0077b5 !important;background-image:-moz-linear-gradient(top, #0077b5 0%, #0077b5 100%) !important;}.success #li_ui_li_gen_1546098566105_1 #li_ui_li_gen_1546098566105_1-title-text, .success #li_ui_li_gen_1546098566105_1 #li_ui_li_gen_1546098566105_1-title-text *{color:#fff !important;}.IN-shadowed .success #li_ui_li_gen_1546098566105_1 #li_ui_li_gen_1546098566105_1-title{}.success #li_ui_li_gen_1546098566105_1.hovered #li_ui_li_gen_1546098566105_1-title{color:#fff !important;border-top-color:#0369a0 !important;border-right-color:#0369a0 !important;border-bottom-color:#0369a0 !important;border-left-color:#0369a0 !important;background-color:#0369a0 !important;background-image:-moz-linear-gradient(top, #0369a0 0%, #0369a0 100%) !important;}.success #li_ui_li_gen_1546098566105_1.hovered #li_ui_li_gen_1546098566105_1-title-text, .success #li_ui_li_gen_1546098566105_1.hovered #li_ui_li_gen_1546098566105_1-title-text *{color:#fff !important;}.success #li_ui_li_gen_1546098566105_1.clicked #li_ui_li_gen_1546098566105_1-title, .success #li_ui_li_gen_1546098566105_1.down #li_ui_li_gen_1546098566105_1-title{color:#fff !important;border-top-color:#066094 !important;border-right-color:#066094 !important;border-bottom-color:#066094 !important;border-left-color:#066094 !important;background-color:#066094 !important;background-image:-moz-linear-gradient(top, #066094 0%, #066094 100%) !important;}.success #li_ui_li_gen_1546098566105_1.clicked #li_ui_li_gen_1546098566105_1-title-text, .success #li_ui_li_gen_1546098566105_1.down #li_ui_li_gen_1546098566105_1-title-text, .success #li_ui_li_gen_1546098566105_1.clicked #li_ui_li_gen_1546098566105_1-title-text *, .success #li_ui_li_gen_1546098566105_1.down #li_ui_li_gen_1546098566105_1-title-text *{color:#fff !important;}.IN-shadowed .success #li_ui_li_gen_1546098566105_1.clicked #li_ui_li_gen_1546098566105_1-title, .IN-shadowed .success #li_ui_li_gen_1546098566105_1.down #li_ui_li_gen_1546098566105_1-title{}</style><link rel="preload" href="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/integrator_002.js" as="script"><script type="text/javascript" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/integrator_002.js"></script><link rel="preload" href="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/integrator.js" as="script"><script type="text/javascript" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/integrator.js"></script><script src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/pubads_impl_285.js" async=""></script></head>
<body>
<header>

<div id="gabarit_b1">
	<div id="gabarit-barreRecherche" style="display:none;"><form action="https://www.google.fr" target="_blank" wtx-context="32F087B3-2624-4401-830D-53569C994064">
  <div>
    <input type="hidden" name="cx" value="partner-pub-8110924381468607:6449306375" wtx-context="A1AD6278-F26D-4E23-9CB1-684DF7048A79">
    <input type="hidden" name="ie" value="UTF-8" wtx-context="558C2FBC-F44A-4643-9A00-10C3A0EDD0E9">
    <input type="text" name="q" size="12" wtx-context="87FC79C4-6244-473C-8A0F-8A5D17ADA5FB">
    <input type="submit" name="sa" value="Rechercher" wtx-context="CABF656E-F530-49B5-8F32-1C5D5BB70EC2">
  </div>
</form></div>
<div id="gabarit-new-logo" role="gabarit-accueil">
	<img src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/logo-dvp-h55.png" width="48" height="55">
	<span class="dvp"></span>
	<span class="triangle"></span>
</div>
<div id="gabarit_recherche"><!--<div class="gabarit-btn-menu profil" role="gabarit-profil"></div>-->
	<div class="gabarit-btn-menu contacts" role="gabarit-contacts"></div><div class="gabarit-btn-menu recherche" role="gabarit-recherche"></div>
</div>

<div id="gabarit_superieur">
	<nav>
	<ul>
		<li><a href="https://www.developpez.net/forums/" title="">Forums</a></li>
		<li><a href="https://general.developpez.com/cours/" title="">Tutoriels</a></li>
		<li><a href="http://magazine.developpez.com/" title="">Magazine</a></li>
		<li><a href="https://general.developpez.com/faq/" title="">FAQ</a></li>
		<li><a href="https://www.developpez.net/forums/blogs/" title="">Blogs</a></li>
		<li><a href="https://chat.developpez.com/" title="">Chat</a></li>
		<li><a href="https://www.developpez.com/newsletter/">Newsletter</a></li>
		<li><a href="https://etudes.developpez.com/">Études</a></li>
		<li><a href="https://emploi.developpez.com/" title="">Emploi</a></li>
		<li><a href="https://club.developpez.com/">Club</a></li>
	</ul>
	</nav>
</div></div>

<nav>

<div id="gabarit_mobile" style="" class="longMenu">
	<div><a href="https://www.developpez.com/"><img src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/logo-mobile.png" alt="" height="60"></a></div>
	<div>
		<p>Developpez.com</p>
		<p>C</p>
	</div>

	<div class="nav nav-pills nav-justified" style="white-space: nowrap; width: calc(100% - 40px);">
					<a href="https://c.developpez.com/" class="nav-item nav-link"> &nbsp;Rubrique C&nbsp; </a>
			<a href="https://www.developpez.net/forums/f7/c-cpp/" class="nav-item nav-link"> &nbsp;Forum C&nbsp; </a>
			
	</div>
	
	<div class="nav nav-pills nav-justified" style="width: calc(100% - 40px); margin: 0 auto 6px;">
		<a href="https://www.developpez.com/" class="nav-item nav-link"><i class="glyphicon glyphicon-home" style="top:0;"></i>&nbsp; Accueil</a>
		<a href="https://www.developpez.net/forums/" class="nav-item nav-link"><i class="glyphicon glyphicon-comment" style="top:1px;"></i>&nbsp; Forums</a>
			
		<span class="nav-item nav-link" style="white-space:nowrap;" data-toggle="collapse" href="#gabarit_menu_mobile" role="button" aria-expanded="false"><i class="glyphicon glyphicon-th" style="top:0;"></i>&nbsp; Rubriques</span>
	</div>
</div>
<div id="gabarit_mobile_fin"></div>

<div class="collapse multi-collapse" id="gabarit_menu_mobile">
	<p>Choisissez la catégorie, puis la rubrique :</p>
	<ul>
					<li>
				<a href="https://www.developpez.com/" data-idrub="1" data-niv="1">Accueil</a>
							</li>
					<li>
				<a href="https://alm.developpez.com/" data-idrub="42" data-niv="1">ALM</a>
									<ul class="gabarit_sousmenu">
						<li>
							<a href="https://alm.developpez.com/" data-idrub="42" data-niv="2">
								<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;ALM
							</a>
						</li>
													<li>
								<a href="https://merise.developpez.com/" data-idrub="43" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Merise
								</a>
							</li>
													<li>
								<a href="https://uml.developpez.com/" data-idrub="12" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;UML
								</a>
							</li>
											</ul>
							</li>
					<li>
				<a href="https://java.developpez.com/" data-idrub="4" data-niv="1">Java</a>
									<ul class="gabarit_sousmenu">
						<li>
							<a href="https://java.developpez.com/" data-idrub="4" data-niv="2">
								<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Java
							</a>
						</li>
													<li>
								<a href="https://javaweb.developpez.com/" data-idrub="97" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Java Web
								</a>
							</li>
													<li>
								<a href="https://spring.developpez.com/" data-idrub="87" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Spring
								</a>
							</li>
													<li>
								<a href="https://android.developpez.com/" data-idrub="95" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Android
								</a>
							</li>
													<li>
								<a href="https://eclipse.developpez.com/" data-idrub="55" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Eclipse
								</a>
							</li>
													<li>
								<a href="https://netbeans.developpez.com/" data-idrub="66" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;NetBeans
								</a>
							</li>
											</ul>
							</li>
					<li>
				<a href="https://dotnet.developpez.com/" data-idrub="20" data-niv="1">.NET</a>
									<ul class="gabarit_sousmenu">
						<li>
							<a href="https://dotnet.developpez.com/" data-idrub="20" data-niv="2">
								<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Microsoft DotNET
							</a>
						</li>
													<li>
								<a href="https://dotnet.developpez.com/visual-studio/" data-idrub="84" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Visual Studio
								</a>
							</li>
													<li>
								<a href="https://dotnet.developpez.com/aspnet/" data-idrub="83" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;ASP.NET
								</a>
							</li>
													<li>
								<a href="https://dotnet.developpez.com/csharp/" data-idrub="81" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;C#
								</a>
							</li>
													<li>
								<a href="https://dotnet.developpez.com/vbnet/" data-idrub="82" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;VB.NET
								</a>
							</li>
													<li>
								<a href="https://windowsphone.developpez.com/" data-idrub="105" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Windows Phone
								</a>
							</li>
													<li>
								<a href="https://windows-azure.developpez.com/" data-idrub="107" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Microsoft Azure
								</a>
							</li>
											</ul>
							</li>
					<li>
				<a href="https://web.developpez.com/" data-idrub="8" data-niv="1">Dév. Web</a>
									<ul class="gabarit_sousmenu">
						<li>
							<a href="https://web.developpez.com/" data-idrub="8" data-niv="2">
								<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Développement Web
							</a>
						</li>
													<li>
								<a href="https://ajax.developpez.com/" data-idrub="85" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;AJAX
								</a>
							</li>
													<li>
								<a href="https://apache.developpez.com/" data-idrub="71" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Apache
								</a>
							</li>
													<li>
								<a href="https://asp.developpez.com/" data-idrub="10" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;ASP
								</a>
							</li>
													<li>
								<a href="https://css.developpez.com/" data-idrub="51" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;CSS
								</a>
							</li>
													<li>
								<a href="https://dart.developpez.com/" data-idrub="125" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Dart
								</a>
							</li>
													<li>
								<a href="https://flash.developpez.com/" data-idrub="41" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Flash / Flex
								</a>
							</li>
													<li>
								<a href="https://javascript.developpez.com/" data-idrub="45" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;JavaScript
								</a>
							</li>
													<li>
								<a href="https://nodejs.developpez.com/" data-idrub="141" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;NodeJS
								</a>
							</li>
													<li>
								<a href="https://php.developpez.com/" data-idrub="9" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;PHP
								</a>
							</li>
													<li>
								<a href="https://ruby.developpez.com/" data-idrub="53" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Ruby &amp; Rails
								</a>
							</li>
													<li>
								<a href="https://typescript.developpez.com/" data-idrub="127" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;TypeScript
								</a>
							</li>
													<li>
								<a href="https://web-semantique.developpez.com/" data-idrub="111" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Web sémantique
								</a>
							</li>
													<li>
								<a href="https://webmarketing.developpez.com/" data-idrub="80" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Webmarketing
								</a>
							</li>
													<li>
								<a href="https://xhtml.developpez.com/" data-idrub="50" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;(X)HTML
								</a>
							</li>
											</ul>
							</li>
					<li>
				<a href="https://edi.developpez.com/" data-idrub="90" data-niv="1">EDI</a>
									<ul class="gabarit_sousmenu">
						<li>
							<a href="https://edi.developpez.com/" data-idrub="90" data-niv="2">
								<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;EDI
							</a>
						</li>
													<li>
								<a href="https://4d.developpez.com/" data-idrub="39" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;4D
								</a>
							</li>
													<li>
								<a href="https://delphi.developpez.com/" data-idrub="2" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Delphi
								</a>
							</li>
													<li>
								<a href="https://eclipse.developpez.com/" data-idrub="55" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Eclipse
								</a>
							</li>
													<li>
								<a href="https://labview.developpez.com/" data-idrub="72" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;LabVIEW
								</a>
							</li>
													<li>
								<a href="https://netbeans.developpez.com/" data-idrub="66" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;NetBeans
								</a>
							</li>
													<li>
								<a href="https://matlab.developpez.com/" data-idrub="58" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;MATLAB
								</a>
							</li>
													<li>
								<a href="https://scilab.developpez.com/" data-idrub="120" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Scilab
								</a>
							</li>
													<li>
								<a href="https://dotnet.developpez.com/visual-studio/" data-idrub="84" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Visual Studio
								</a>
							</li>
													<li>
								<a href="https://wind.developpez.com/" data-idrub="74" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;WinDev
								</a>
							</li>
													<li>
								<a href="https://vb.developpez.com/" data-idrub="5" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Visual Basic 6
								</a>
							</li>
													<li>
								<a href="https://lazarus.developpez.com/" data-idrub="96" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Lazarus
								</a>
							</li>
													<li>
								<a href="https://qt-creator.developpez.com/" data-idrub="109" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Qt Creator
								</a>
							</li>
											</ul>
							</li>
					<li>
				<a href="https://programmation.developpez.com/" data-idrub="119" data-niv="1">Programmation</a>
									<ul class="gabarit_sousmenu">
						<li>
							<a href="https://programmation.developpez.com/" data-idrub="119" data-niv="2">
								<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Programmation
							</a>
						</li>
													<li>
								<a href="https://algo.developpez.com/" data-idrub="47" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Débuter - Algorithmique
								</a>
							</li>
													<li>
								<a href="https://jeux.developpez.com/" data-idrub="38" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;2D - 3D - Jeux
								</a>
							</li>
													<li>
								<a href="https://asm.developpez.com/" data-idrub="16" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Assembleur
								</a>
							</li>
													<li>
								<a href="https://c.developpez.com/" data-idrub="3" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;C
								</a>
							</li>
													<li>
								<a href="https://cpp.developpez.com/" data-idrub="59" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;C++
								</a>
							</li>
													<li>
								<a href="https://go.developpez.com/" data-idrub="124" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Go
								</a>
							</li>
													<li>
								<a href="https://objective-c.developpez.com/" data-idrub="117" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Objective C
								</a>
							</li>
													<li>
								<a href="https://pascal.developpez.com/" data-idrub="7" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Pascal
								</a>
							</li>
													<li>
								<a href="https://perl.developpez.com/" data-idrub="29" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Perl
								</a>
							</li>
													<li>
								<a href="https://python.developpez.com/" data-idrub="27" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Python
								</a>
							</li>
													<li>
								<a href="https://rust.developpez.com/" data-idrub="137" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Rust
								</a>
							</li>
													<li>
								<a href="https://swift.developpez.com/" data-idrub="128" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Swift
								</a>
							</li>
													<li>
								<a href="https://qt.developpez.com/" data-idrub="65" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Qt
								</a>
							</li>
													<li>
								<a href="https://xml.developpez.com/" data-idrub="11" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;XML
								</a>
							</li>
													<li>
								<a href="https://general.developpez.com/cours/" data-idrub="21" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Autres
								</a>
							</li>
											</ul>
							</li>
					<li>
				<a href="https://sgbd.developpez.com/" data-idrub="13" data-niv="1">SGBD</a>
									<ul class="gabarit_sousmenu">
						<li>
							<a href="https://sgbd.developpez.com/" data-idrub="13" data-niv="2">
								<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;SGBD &amp; SQL
							</a>
						</li>
													<li>
								<a href="https://4d.developpez.com/" data-idrub="39" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;4D
								</a>
							</li>
													<li>
								<a href="https://access.developpez.com/" data-idrub="19" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Access
								</a>
							</li>
													<li>
								<a href="https://big-data.developpez.com/" data-idrub="126" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Big Data
								</a>
							</li>
													<li>
								<a href="https://db2.developpez.com/" data-idrub="36" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;DB2
								</a>
							</li>
													<li>
								<a href="https://firebird.developpez.com/" data-idrub="73" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Firebird
								</a>
							</li>
													<li>
								<a href="https://interbase.developpez.com/" data-idrub="32" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;InterBase
								</a>
							</li>
													<li>
								<a href="https://mysql.developpez.com/" data-idrub="31" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;MySQL
								</a>
							</li>
													<li>
								<a href="https://nosql.developpez.com/" data-idrub="114" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;NoSQL
								</a>
							</li>
													<li>
								<a href="https://postgresql.developpez.com/" data-idrub="33" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;PostgreSQL
								</a>
							</li>
													<li>
								<a href="https://oracle.developpez.com/" data-idrub="25" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Oracle
								</a>
							</li>
													<li>
								<a href="https://sybase.developpez.com/" data-idrub="37" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Sybase
								</a>
							</li>
													<li>
								<a href="https://sqlserver.developpez.com/" data-idrub="34" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;SQL-Server
								</a>
							</li>
											</ul>
							</li>
					<li>
				<a href="https://office.developpez.com/" data-idrub="54" data-niv="1">Office</a>
									<ul class="gabarit_sousmenu">
						<li>
							<a href="https://office.developpez.com/" data-idrub="54" data-niv="2">
								<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Microsoft Office
							</a>
						</li>
													<li>
								<a href="https://access.developpez.com/" data-idrub="19" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Access
								</a>
							</li>
													<li>
								<a href="https://excel.developpez.com/" data-idrub="75" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Excel
								</a>
							</li>
													<li>
								<a href="https://word.developpez.com/" data-idrub="76" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Word
								</a>
							</li>
													<li>
								<a href="https://outlook.developpez.com/" data-idrub="77" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Outlook
								</a>
							</li>
													<li>
								<a href="https://powerpoint.developpez.com/" data-idrub="78" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;PowerPoint
								</a>
							</li>
													<li>
								<a href="https://sharepoint.developpez.com/" data-idrub="79" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;SharePoint
								</a>
							</li>
													<li>
								<a href="https://project.developpez.com/" data-idrub="99" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Microsoft Project
								</a>
							</li>
													<li>
								<a href="https://openoffice-libreoffice.developpez.com/" data-idrub="116" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;OpenOffice &amp; LibreOffice
								</a>
							</li>
											</ul>
							</li>
					<li>
				<a href="https://solutions-entreprise.developpez.com/" data-idrub="86" data-niv="1">Solutions d'entreprise</a>
									<ul class="gabarit_sousmenu">
						<li>
							<a href="https://solutions-entreprise.developpez.com/" data-idrub="86" data-niv="2">
								<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Solutions d'entreprise
							</a>
						</li>
													<li>
								<a href="https://big-data.developpez.com/" data-idrub="126" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Big Data
								</a>
							</li>
													<li>
								<a href="https://bpm.developpez.com/" data-idrub="134" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;BPM
								</a>
							</li>
													<li>
								<a href="https://business-intelligence.developpez.com/" data-idrub="61" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Business Intelligence
								</a>
							</li>
													<li>
								<a href="https://solutions-entreprise.developpez.com/erp-pgi/presentation-erp-pgi/" data-idrub="91" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;ERP / PGI
								</a>
							</li>
													<li>
								<a href="https://crm.developpez.com/" data-idrub="92" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;CRM
								</a>
							</li>
													<li>
								<a href="https://sas.developpez.com/" data-idrub="93" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;SAS
								</a>
							</li>
													<li>
								<a href="https://cloud-computing.developpez.com/" data-idrub="103" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Cloud Computing
								</a>
							</li>
													<li>
								<a href="https://sap.developpez.com/" data-idrub="106" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;SAP
								</a>
							</li>
													<li>
								<a href="https://www.developpez.net/forums/f1664/systemes/windows/windows-serveur/biztalk-server/" data-idrub="115" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Microsoft BizTalk Server
								</a>
							</li>
													<li>
								<a href="https://talend.developpez.com/" data-idrub="118" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Talend
								</a>
							</li>
													<li>
								<a href="https://ibmcloud.developpez.com/" data-idrub="135" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;IBM Cloud
								</a>
							</li>
											</ul>
							</li>
					<li>
				<a href="https://applications.developpez.com/" data-idrub="88" data-niv="1">Applications</a>
									<ul class="gabarit_sousmenu">
						<li>
							<a href="https://applications.developpez.com/" data-idrub="88" data-niv="2">
								<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Applications
							</a>
						</li>
													<li>
								<a href="https://open-source.developpez.com/" data-idrub="121" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Libres &amp; Open Source
								</a>
							</li>
													<li>
								<a href="https://openoffice-libreoffice.developpez.com/" data-idrub="116" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;OpenOffice &amp; LibreOffice
								</a>
							</li>
													<li>
								<a href="https://portail-projets.developpez.com/" data-idrub="98" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Projets
								</a>
							</li>
											</ul>
							</li>
					<li>
				<a href="https://mobiles.developpez.com/" data-idrub="94" data-niv="1">Mobiles</a>
									<ul class="gabarit_sousmenu">
						<li>
							<a href="https://mobiles.developpez.com/" data-idrub="94" data-niv="2">
								<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Mobiles
							</a>
						</li>
													<li>
								<a href="https://android.developpez.com/" data-idrub="95" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Android
								</a>
							</li>
													<li>
								<a href="https://ios.developpez.com/" data-idrub="101" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;iOS
								</a>
							</li>
													<li>
								<a href="https://windowsphone.developpez.com/" data-idrub="105" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Windows Phone
								</a>
							</li>
											</ul>
							</li>
					<li>
				<a href="https://systeme.developpez.com/" data-idrub="30" data-niv="1">Systèmes</a>
									<ul class="gabarit_sousmenu">
						<li>
							<a href="https://systeme.developpez.com/" data-idrub="30" data-niv="2">
								<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Systèmes
							</a>
						</li>
													<li>
								<a href="https://windows.developpez.com/" data-idrub="17" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Windows
								</a>
							</li>
													<li>
								<a href="https://linux.developpez.com/" data-idrub="18" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Linux
								</a>
							</li>
													<li>
								<a href="https://arduino.developpez.com/" data-idrub="142" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Arduino
								</a>
							</li>
													<li>
								<a href="https://securite.developpez.com/" data-idrub="40" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Sécurité
								</a>
							</li>
													<li>
								<a href="https://hardware.developpez.com/" data-idrub="64" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Hardware
								</a>
							</li>
													<li>
								<a href="https://hpc.developpez.com/" data-idrub="139" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;HPC
								</a>
							</li>
													<li>
								<a href="https://mac.developpez.com/" data-idrub="57" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Mac
								</a>
							</li>
													<li>
								<a href="https://raspberry-pi.developpez.com/" data-idrub="131" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Raspberry Pi
								</a>
							</li>
													<li>
								<a href="https://reseau.developpez.com/" data-idrub="70" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Réseau
								</a>
							</li>
													<li>
								<a href="https://green-it.developpez.com/" data-idrub="104" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Green IT
								</a>
							</li>
													<li>
								<a href="https://embarque.developpez.com/" data-idrub="110" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Systèmes Embarqués
								</a>
							</li>
													<li>
								<a href="https://virtualisation.developpez.com/" data-idrub="108" data-niv="2">
									<span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>&nbsp;&nbsp;Virtualisation
								</a>
							</li>
											</ul>
							</li>
			</ul>
</div>

<ul id="gabarit_menu" style="padding-left:56px;">
	<li><a href="https://www.developpez.com/" data-idrub="1" data-niv="1">Accueil<!--<span class="gabarit_tooltip">Actualités IT Pro</span>--></a>
			</li>
	<li><a href="https://alm.developpez.com/" data-idrub="42" data-niv="1">ALM<!--<span class="gabarit_tooltip">Cycle de vie du logiciel</span>--></a>
			<ul class="gabarit_sousmenu">
				<li><a href="https://alm.developpez.com/" data-idrub="42" data-niv="2">ALM</a></li>
				<li><a href="https://merise.developpez.com/" data-idrub="43" data-niv="2">Merise</a></li>
				<li><a href="https://uml.developpez.com/" data-idrub="12" data-niv="2">UML</a></li>
			</ul></li>
	<li><a href="https://java.developpez.com/" data-idrub="4" data-niv="1">Java<!--<span class="gabarit_tooltip">Plateforme et langage Java</span>--></a>
			<ul class="gabarit_sousmenu">
				<li><a href="https://java.developpez.com/" data-idrub="4" data-niv="2">Java</a></li>
				<li><a href="https://javaweb.developpez.com/" data-idrub="97" data-niv="2">Java Web</a></li>
				<li><a href="https://spring.developpez.com/" data-idrub="87" data-niv="2">Spring</a></li>
				<li><a href="https://android.developpez.com/" data-idrub="95" data-niv="2">Android</a></li>
				<li><a href="https://eclipse.developpez.com/" data-idrub="55" data-niv="2">Eclipse</a></li>
				<li><a href="https://netbeans.developpez.com/" data-idrub="66" data-niv="2">NetBeans</a></li>
			</ul></li>
	<li><a href="https://dotnet.developpez.com/" data-idrub="20" data-niv="1">.NET<!--<span class="gabarit_tooltip">Microsoft Framework .NET</span>--></a>
			<ul class="gabarit_sousmenu">
				<li><a href="https://dotnet.developpez.com/" data-idrub="20" data-niv="2">Microsoft DotNET</a></li>
				<li><a href="https://dotnet.developpez.com/visual-studio/" data-idrub="84" data-niv="2">Visual Studio</a></li>
				<li><a href="https://dotnet.developpez.com/aspnet/" data-idrub="83" data-niv="2">ASP.NET</a></li>
				<li><a href="https://dotnet.developpez.com/csharp/" data-idrub="81" data-niv="2">C#</a></li>
				<li><a href="https://dotnet.developpez.com/vbnet/" data-idrub="82" data-niv="2">VB.NET</a></li>
				<li><a href="https://windowsphone.developpez.com/" data-idrub="105" data-niv="2">Windows Phone</a></li>
				<li><a href="https://windows-azure.developpez.com/" data-idrub="107" data-niv="2">Microsoft Azure</a></li>
			</ul></li>
	<li><a href="https://web.developpez.com/" data-idrub="8" data-niv="1">Dév. Web<!--<span class="gabarit_tooltip">Développement Web et Webmarketing</span>--></a>
			<ul class="gabarit_sousmenu">
				<li><a href="https://web.developpez.com/" data-idrub="8" data-niv="2">Développement Web</a></li>
				<li><a href="https://ajax.developpez.com/" data-idrub="85" data-niv="2">AJAX</a></li>
				<li><a href="https://apache.developpez.com/" data-idrub="71" data-niv="2">Apache</a></li>
				<li><a href="https://asp.developpez.com/" data-idrub="10" data-niv="2">ASP</a></li>
				<li><a href="https://css.developpez.com/" data-idrub="51" data-niv="2">CSS</a></li>
				<li><a href="https://dart.developpez.com/" data-idrub="125" data-niv="2">Dart</a></li>
				<li><a href="https://flash.developpez.com/" data-idrub="41" data-niv="2">Flash / Flex</a></li>
				<li><a href="https://javascript.developpez.com/" data-idrub="45" data-niv="2">JavaScript</a></li>
				<li><a href="https://nodejs.developpez.com/" data-idrub="141" data-niv="2">NodeJS</a></li>
				<li><a href="https://php.developpez.com/" data-idrub="9" data-niv="2">PHP</a></li>
				<li><a href="https://ruby.developpez.com/" data-idrub="53" data-niv="2">Ruby &amp; Rails</a></li>
				<li><a href="https://typescript.developpez.com/" data-idrub="127" data-niv="2">TypeScript</a></li>
				<li><a href="https://web-semantique.developpez.com/" data-idrub="111" data-niv="2">Web sémantique</a></li>
				<li><a href="https://webmarketing.developpez.com/" data-idrub="80" data-niv="2">Webmarketing</a></li>
				<li><a href="https://xhtml.developpez.com/" data-idrub="50" data-niv="2">(X)HTML</a></li>
			</ul></li>
	<li><a href="https://edi.developpez.com/" data-idrub="90" data-niv="1">EDI<!--<span class="gabarit_tooltip">Environnements de Développement Intégré</span>--></a>
			<ul class="gabarit_sousmenu">
				<li><a href="https://edi.developpez.com/" data-idrub="90" data-niv="2">EDI</a></li>
				<li><a href="https://4d.developpez.com/" data-idrub="39" data-niv="2">4D</a></li>
				<li><a href="https://delphi.developpez.com/" data-idrub="2" data-niv="2">Delphi</a></li>
				<li><a href="https://eclipse.developpez.com/" data-idrub="55" data-niv="2">Eclipse</a></li>
				<li><a href="https://labview.developpez.com/" data-idrub="72" data-niv="2">LabVIEW</a></li>
				<li><a href="https://netbeans.developpez.com/" data-idrub="66" data-niv="2">NetBeans</a></li>
				<li><a href="https://matlab.developpez.com/" data-idrub="58" data-niv="2">MATLAB</a></li>
				<li><a href="https://scilab.developpez.com/" data-idrub="120" data-niv="2">Scilab</a></li>
				<li><a href="https://dotnet.developpez.com/visual-studio/" data-idrub="84" data-niv="2">Visual Studio</a></li>
				<li><a href="https://wind.developpez.com/" data-idrub="74" data-niv="2">WinDev</a></li>
				<li><a href="https://vb.developpez.com/" data-idrub="5" data-niv="2">Visual Basic 6</a></li>
				<li><a href="https://lazarus.developpez.com/" data-idrub="96" data-niv="2">Lazarus</a></li>
				<li><a href="https://qt-creator.developpez.com/" data-idrub="109" data-niv="2">Qt Creator</a></li>
			</ul></li>
	<li><a href="https://programmation.developpez.com/" data-idrub="119" data-niv="1" class="gabarit_selection">Programmation<!--<span class="gabarit_tooltip">Programmation et langages de programmation applicatifs</span>--></a>
			<ul class="gabarit_sousmenu">
				<li><a href="https://programmation.developpez.com/" data-idrub="119" data-niv="2">Programmation</a></li>
				<li><a href="https://algo.developpez.com/" data-idrub="47" data-niv="2">Débuter - Algorithmique</a></li>
				<li><a href="https://jeux.developpez.com/" data-idrub="38" data-niv="2">2D - 3D - Jeux</a></li>
				<li><a href="https://asm.developpez.com/" data-idrub="16" data-niv="2">Assembleur</a></li>
				<li><a href="https://c.developpez.com/" data-idrub="3" data-niv="2">C</a></li>
				<li><a href="https://cpp.developpez.com/" data-idrub="59" data-niv="2">C++</a></li>
				<li><a href="https://go.developpez.com/" data-idrub="124" data-niv="2">Go</a></li>
				<li><a href="https://objective-c.developpez.com/" data-idrub="117" data-niv="2">Objective C</a></li>
				<li><a href="https://pascal.developpez.com/" data-idrub="7" data-niv="2">Pascal</a></li>
				<li><a href="https://perl.developpez.com/" data-idrub="29" data-niv="2">Perl</a></li>
				<li><a href="https://python.developpez.com/" data-idrub="27" data-niv="2">Python</a></li>
				<li><a href="https://rust.developpez.com/" data-idrub="137" data-niv="2">Rust</a></li>
				<li><a href="https://swift.developpez.com/" data-idrub="128" data-niv="2">Swift</a></li>
				<li><a href="https://qt.developpez.com/" data-idrub="65" data-niv="2">Qt</a></li>
				<li><a href="https://xml.developpez.com/" data-idrub="11" data-niv="2">XML</a></li>
				<li><a href="https://general.developpez.com/cours/" data-idrub="21" data-niv="2">Autres</a></li>
			</ul></li>
	<li><a href="https://sgbd.developpez.com/" data-idrub="13" data-niv="1">SGBD<!--<span class="gabarit_tooltip">Systèmes de Gestion de Bases de Données</span>--></a>
			<ul class="gabarit_sousmenu">
				<li><a href="https://sgbd.developpez.com/" data-idrub="13" data-niv="2">SGBD &amp; SQL</a></li>
				<li><a href="https://4d.developpez.com/" data-idrub="39" data-niv="2">4D</a></li>
				<li><a href="https://access.developpez.com/" data-idrub="19" data-niv="2">Access</a></li>
				<li><a href="https://big-data.developpez.com/" data-idrub="126" data-niv="2">Big Data</a></li>
				<li><a href="https://db2.developpez.com/" data-idrub="36" data-niv="2">DB2</a></li>
				<li><a href="https://firebird.developpez.com/" data-idrub="73" data-niv="2">Firebird</a></li>
				<li><a href="https://interbase.developpez.com/" data-idrub="32" data-niv="2">InterBase</a></li>
				<li><a href="https://mysql.developpez.com/" data-idrub="31" data-niv="2">MySQL</a></li>
				<li><a href="https://nosql.developpez.com/" data-idrub="114" data-niv="2">NoSQL</a></li>
				<li><a href="https://postgresql.developpez.com/" data-idrub="33" data-niv="2">PostgreSQL</a></li>
				<li><a href="https://oracle.developpez.com/" data-idrub="25" data-niv="2">Oracle</a></li>
				<li><a href="https://sybase.developpez.com/" data-idrub="37" data-niv="2">Sybase</a></li>
				<li><a href="https://sqlserver.developpez.com/" data-idrub="34" data-niv="2">SQL-Server</a></li>
			</ul></li>
	<li><a href="https://office.developpez.com/" data-idrub="54" data-niv="1">Office<!--<span class="gabarit_tooltip">Bureautique pour l'entreprise</span>--></a>
			<ul class="gabarit_sousmenu">
				<li><a href="https://office.developpez.com/" data-idrub="54" data-niv="2">Microsoft Office</a></li>
				<li><a href="https://access.developpez.com/" data-idrub="19" data-niv="2">Access</a></li>
				<li><a href="https://excel.developpez.com/" data-idrub="75" data-niv="2">Excel</a></li>
				<li><a href="https://word.developpez.com/" data-idrub="76" data-niv="2">Word</a></li>
				<li><a href="https://outlook.developpez.com/" data-idrub="77" data-niv="2">Outlook</a></li>
				<li><a href="https://powerpoint.developpez.com/" data-idrub="78" data-niv="2">PowerPoint</a></li>
				<li><a href="https://sharepoint.developpez.com/" data-idrub="79" data-niv="2">SharePoint</a></li>
				<li><a href="https://project.developpez.com/" data-idrub="99" data-niv="2">Microsoft Project</a></li>
				<li><a href="https://openoffice-libreoffice.developpez.com/" data-idrub="116" data-niv="2">OpenOffice &amp; LibreOffice</a></li>
			</ul></li>
	<li><a href="https://solutions-entreprise.developpez.com/" data-idrub="86" data-niv="1">Solutions d'entreprise<!--<span class="gabarit_tooltip">Autres logiciels pour l'entreprise</span>--></a>
			<ul class="gabarit_sousmenu">
				<li><a href="https://solutions-entreprise.developpez.com/" data-idrub="86" data-niv="2">Solutions d'entreprise</a></li>
				<li><a href="https://big-data.developpez.com/" data-idrub="126" data-niv="2">Big Data</a></li>
				<li><a href="https://bpm.developpez.com/" data-idrub="134" data-niv="2">BPM</a></li>
				<li><a href="https://business-intelligence.developpez.com/" data-idrub="61" data-niv="2">Business Intelligence</a></li>
				<li><a href="https://solutions-entreprise.developpez.com/erp-pgi/presentation-erp-pgi/" data-idrub="91" data-niv="2">ERP / PGI</a></li>
				<li><a href="https://crm.developpez.com/" data-idrub="92" data-niv="2">CRM</a></li>
				<li><a href="https://sas.developpez.com/" data-idrub="93" data-niv="2">SAS</a></li>
				<li><a href="https://cloud-computing.developpez.com/" data-idrub="103" data-niv="2">Cloud Computing</a></li>
				<li><a href="https://sap.developpez.com/" data-idrub="106" data-niv="2">SAP</a></li>
				<li><a href="https://www.developpez.net/forums/f1664/systemes/windows/windows-serveur/biztalk-server/" data-idrub="115" data-niv="2">Microsoft BizTalk Server</a></li>
				<li><a href="https://talend.developpez.com/" data-idrub="118" data-niv="2">Talend</a></li>
				<li><a href="https://ibmcloud.developpez.com/" data-idrub="135" data-niv="2">IBM Cloud</a></li>
			</ul></li>
	<li><a href="https://applications.developpez.com/" data-idrub="88" data-niv="1">Applications<!--<span class="gabarit_tooltip">Applications logicielles</span>--></a>
			<ul class="gabarit_sousmenu">
				<li><a href="https://applications.developpez.com/" data-idrub="88" data-niv="2">Applications</a></li>
				<li><a href="https://open-source.developpez.com/" data-idrub="121" data-niv="2">Libres &amp; Open Source</a></li>
				<li><a href="https://openoffice-libreoffice.developpez.com/" data-idrub="116" data-niv="2">OpenOffice &amp; LibreOffice</a></li>
				<li><a href="https://portail-projets.developpez.com/" data-idrub="98" data-niv="2">Projets</a></li>
			</ul></li>
	<li><a href="https://mobiles.developpez.com/" data-idrub="94" data-niv="1">Mobiles<!--<span class="gabarit_tooltip">Logiciels et matériels mobiles</span>--></a>
			<ul class="gabarit_sousmenu">
				<li><a href="https://mobiles.developpez.com/" data-idrub="94" data-niv="2">Mobiles</a></li>
				<li><a href="https://android.developpez.com/" data-idrub="95" data-niv="2">Android</a></li>
				<li><a href="https://ios.developpez.com/" data-idrub="101" data-niv="2">iOS</a></li>
				<li><a href="https://windowsphone.developpez.com/" data-idrub="105" data-niv="2">Windows Phone</a></li>
			</ul></li>
	<li><a href="https://systeme.developpez.com/" data-idrub="30" data-niv="1">Systèmes<!--<span class="gabarit_tooltip">Logiciels et matériels systèmes</span>--></a>
			<ul class="gabarit_sousmenu">
				<li><a href="https://systeme.developpez.com/" data-idrub="30" data-niv="2">Systèmes</a></li>
				<li><a href="https://windows.developpez.com/" data-idrub="17" data-niv="2">Windows</a></li>
				<li><a href="https://linux.developpez.com/" data-idrub="18" data-niv="2">Linux</a></li>
				<li><a href="https://arduino.developpez.com/" data-idrub="142" data-niv="2">Arduino</a></li>
				<li><a href="https://securite.developpez.com/" data-idrub="40" data-niv="2">Sécurité</a></li>
				<li><a href="https://hardware.developpez.com/" data-idrub="64" data-niv="2">Hardware</a></li>
				<li><a href="https://hpc.developpez.com/" data-idrub="139" data-niv="2">HPC</a></li>
				<li><a href="https://mac.developpez.com/" data-idrub="57" data-niv="2">Mac</a></li>
				<li><a href="https://raspberry-pi.developpez.com/" data-idrub="131" data-niv="2">Raspberry Pi</a></li>
				<li><a href="https://reseau.developpez.com/" data-idrub="70" data-niv="2">Réseau</a></li>
				<li><a href="https://green-it.developpez.com/" data-idrub="104" data-niv="2">Green IT</a></li>
				<li><a href="https://embarque.developpez.com/" data-idrub="110" data-niv="2">Systèmes Embarqués</a></li>
				<li><a href="https://virtualisation.developpez.com/" data-idrub="108" data-niv="2">Virtualisation</a></li>
			</ul></li>
</ul>

<ul id="gabarit_barre1"><li><a href="https://programmation.developpez.com/">Programmation</a></li><li><a href="https://algo.developpez.com/">Algorithmique</a></li><li><a href="https://jeux.developpez.com/">2D-3D-Jeux</a></li><li><a href="https://asm.developpez.com/">Assembleur</a></li><li class="gabarit_selection"><a href="https://c.developpez.com/">C</a></li><li><a href="https://cpp.developpez.com/">C++</a></li><li><a href="https://go.developpez.com/">Go</a></li><li><a href="https://objective-c.developpez.com/">Objective C</a></li><li><a href="https://pascal.developpez.com/">Pascal</a></li><li><a href="https://perl.developpez.com/">Perl</a></li><li><a href="https://python.developpez.com/">Python</a></li><li><a href="https://rust.developpez.com/">Rust</a></li><li><a href="https://swift.developpez.com/">Swift</a></li><li><a href="https://qt.developpez.com/">Qt</a></li><li><a href="https://xml.developpez.com/">XML</a></li><li><a href="https://general.developpez.com/cours/">Autres</a></li></ul>

<div id="gabarit_barre2">
	<a class="gabarit_social gabarit_facebook" href="http://www.facebook.com/pages/C/108584359174497" target="_blank" title="Retrouver Developpez sur Facebook"></a>
	<a class="gabarit_social gabarit_twitter" href="http://twitter.com/C_Developpez" target="_blank" title="Retrouver Developpez sur Twitter"></a>
	<a class="gabarit_social gabarit_rss" href="http://c.developpez.com/index/rss" target="_blank" title="Flux RSS"></a>
	<ul>
<li><a href="https://c.developpez.com/">Accueil C</a></li><li><a href="https://www.developpez.net/forums/f7/c-cpp/">Forums C</a></li><li><a href="https://c.developpez.com/faq/">FAQ C</a></li><li><a href="https://c.developpez.com/cours/">Tutoriels C</a></li><li><a href="https://c.developpez.com/livres/">Livres C</a></li><li><a href="https://c.developpez.com/telecharger/index/categorie/30/Outils-C-C">Compilateurs et outils C</a></li><li><a href="https://c.developpez.com/telecharger/index/categorie/149/Sources-C">Sources C</a></li><li><a href="https://c.developpez.com/telecharger/index/categorie/451/Bibliotheques-C">Bibliothèques C</a></li><li><a href="http://gtk.developpez.com/">GTK+</a></li>	</ul>
</div>

</nav>
</header>
<section>

<div id="gabarit_pubBB">
<div id="gabarit_pub0"></div><div id="wj3fh0z" style="display: inline-block; width: 728px; height: 90px"><style type="text/css">html, body { margin: 0; padding: 0; }</style><iframe src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/show_i.html" marginwidth="0" marginheight="0" hspace="0" vspace="0" scrolling="no" width="728" height="90" frameborder="0"></iframe><style type="text/css"> #gabarit_pub0 { display: inline-block; }</style></div>
</div>

<div class="contenuPage">		<article class="ArticleComplet" itemscope="" itemtype="http://schema.org/Article" style="margin: 0px 20px;">
<meta itemprop="genre" content="informatique">
<meta itemprop="inLanguage" content="fr-FR">
		
<header class="EnteteTitres">
<h1 class="titre-article" itemprop="name">Initiation à la programmation multitâche en C avec Pthreads</h1>

</header><nav class="nav-sommaire pubtuto" role="navigation" style="height: 431px;"><div><div id="du3yv1r" style="display: inline-block; width: 300px; height: 250px"><style type="text/css">html, body { margin: 0; padding: 0; }</style><iframe src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/show_i_002.html" marginwidth="0" marginheight="0" hspace="0" vspace="0" scrolling="no" width="300" height="250" frameborder="0"></iframe><style type="text/css"> #gabarit_pub1 { display: block; }</style></div><div id="gabarit_pub1"></div></div><div>
<header><h1 class="TitreHeader StopArrondi ToggleGecko">Table des matières<img class="ToggleImgPlier" title="Plier" alt="Plier" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/fleche-haut-bleue.png"><img class="ToggleImgDeplier" title="Déplier" alt="Déplier" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/fleche-bas-bleue.png" style="display:none;"></h1></header>
<ul id="nav_sommaire_ul_principal" class="nav-sommaire-ul" style="overflow-y: scroll; height: 381px;">
    <li><a class="summaryIndent0" href="#LI">I. Introduction</a></li>
    <li><a class="summaryIndent0" href="#LII">II. Avant de commencer</a></li>
    <li><a class="summaryIndent0" href="#LIII">III. Qu'est-ce qu'un thread ?</a></li>
    <li><a class="summaryIndent0" href="#LIV">IV. Création et exécution des threads</a><ul class="nav-sommaire-ul IndentationIV">
      
      <li><a class="summaryIndent1" href="#LIV-A">IV-A. pthread_create</a></li>
    </ul></li>
    <li><a class="summaryIndent0" href="#LV">V. Annulation et fin des threads</a><ul class="nav-sommaire-ul IndentationV">
      
      <li><a class="summaryIndent1" href="#LV-A">V-A. pthread_exit</a></li>
      <li><a class="summaryIndent1" href="#LV-B">V-B. pthread_cancel</a><ul class="nav-sommaire-ul IndentationV-B">
        
        
        
        
        
        <li><a class="summaryIndent2" href="#LV-B-1">V-B-1. pthread_setcancelstate</a></li>
      </ul></li>
      <li><a class="summaryIndent1" href="#LV-C">V-C. pthread_join</a></li>
    </ul></li>
    <li><a class="summaryIndent0" href="#LVI">VI. Mise en pratique</a><ul class="nav-sommaire-ul IndentationVI">
      
      
      <li><a class="summaryIndent1" href="#LVI-A">VI-A. Code complet</a></li>
      <li><a class="summaryIndent1" href="#LVI-B">VI-B. Sortie du programme</a></li>
      <li><a class="summaryIndent1" href="#LVI-C">VI-C. Observations</a></li>
    </ul></li>
    <li><a class="summaryIndent0" href="#LVII">VII. Les mutex</a><ul class="nav-sommaire-ul IndentationVII">
      
      
      
      
      <li><a class="summaryIndent1" href="#LVII-A">VII-A. pthread_mutex_lock</a></li>
      <li><a class="summaryIndent1" href="#LVII-B">VII-B. pthread_mutex_unlock</a></li>
    </ul></li>
    <li><a class="summaryIndent0" href="#LVIII">VIII. Mise en pratique</a><ul class="nav-sommaire-ul IndentationVIII">
      
      
      
      <li><a class="summaryIndent1" href="#LVIII-A">VIII-A. Code complet</a></li>
      <li><a class="summaryIndent1" href="#LVIII-B">VIII-B. Sortie du programme</a></li>
      <li><a class="summaryIndent1" href="#LVIII-C">VIII-C. Observations</a></li>
    </ul></li>
    <li><a class="summaryIndent0" href="#LIX">IX. Les conditions</a><ul class="nav-sommaire-ul IndentationIX">
      
      
      
      
      
      
      <li><a class="summaryIndent1" href="#LIX-A">IX-A. pthread_cond_wait</a></li>
      <li><a class="summaryIndent1" href="#LIX-B">IX-B. pthread_cond_signal</a></li>
      <li><a class="summaryIndent1" href="#LIX-C">IX-C. pthread_cond_broadcast</a></li>
    </ul></li>
    <li><a class="summaryIndent0" href="#LX">X. Mise en pratique</a><ul class="nav-sommaire-ul IndentationX">
      
      
      <li><a class="summaryIndent1" href="#LX-A">X-A. Fonction : fn_store</a></li>
      <li><a class="summaryIndent1" href="#LX-B">X-B. Fonction : fn_clients</a></li>
      <li><a class="summaryIndent1" href="#LX-C">X-C. Code complet</a></li>
      <li><a class="summaryIndent1" href="#LX-D">X-D. Sortie du programme</a></li>
      <li><a class="summaryIndent1" href="#LX-E">X-E. Observations</a></li>
    </ul></li>
    <li><a class="summaryIndent0" href="#LXI">XI. Test des threads</a><ul class="nav-sommaire-ul IndentationXI">
      
      
      <li><a class="summaryIndent1" href="#LXI-A">XI-A. pthread_equal</a></li>
      <li><a class="summaryIndent1" href="#LXI-B">XI-B. pthread_self</a></li>
    </ul></li>
    <li><a class="summaryIndent0" href="#LXII">XII. Conclusion</a></li>
    <li><a class="summaryIndent0" href="#LXIII">XIII. Remerciements</a></li>
  </ul></div></nav>


<div class="fixeMarge"><section itemprop="about" class="SectionSynopsis">
    <p>
	Les threads permettent de créer des programmes multitâches, ce
	tutoriel vous propose une approche par la pratique en partant d'un
	exemple unique !
	<br><br>
	Commentez cet article : <a class="lienforum" href="https://www.developpez.net/forums/showthread.php?t=840033">5&nbsp;commentaires</a> <img src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/kitstars-5-0.png" style="border: none" alt="Donner une note à l'article (5)" width="66" height="14"></p>
  <p class="TextNbrVues" style="display: block;">Article lu <span id="NbrVues">140509</span> fois.</p></section></div><div class="InfoAuthArtBook" style="height: 133px;">
	<section class="SectionAuteurs">
	<header><h1 class="TitreHeader">L'auteur</h1></header>
<p class="auteur" itemprop="name" itemscope="" itemtype="http://schema.org/Person"><a itemprop="url" class="auteur" href="https://www.developpez.net/forums/u29006/franck-h/"><span itemprop="author">Franck Hecht</span></a><a class="homepage" href="https://www.developpez.com/user/profil/29006/franck-h/"><img src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/pro.png" title="Profil Pro" alt="Profil Pro" style="vertical-align:middle;"></a><a class="homepage" href="http://franckh.developpez.com/"><img src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/kitbm-site-personnel.png" title="retour aux articles" alt="Site personnel" style="vertical-align:middle;"></a><a itemprop="url" class="homepage" href="http://blog.developpez.com/index.php?blog=163"><img src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/kitbm-blog.png" title="Blog" alt="Blog" style="vertical-align:middle;"></a></p>
</section>
<section class="SectionInformationArticle">
<header><h1 class="TitreHeader">L'article</h1></header>

<p class="InfoArticle">Publié&nbsp;le&nbsp;<span itemprop="datePublished">4&nbsp;novembre&nbsp;2007&nbsp;</span></p><p>
<span class="lientelechargementpdf"><a class="lientelechargement" href="http://franckh.developpez.com/tutoriels/posix/pthreads/pthread.pdf" title="Télécharger la version PDF de cet article.">Version PDF</a></span>
<span class="lientelechargementzip"><a class="lientelechargement" href="http://franckh.developpez.com/tutoriels/posix/pthreads/pthread.zip" title="Télécharger la version HTML de cet article.">Version hors-ligne</a></span></p>
<p><span class="lientelechargementebook"><a class="lientelechargement" href="http://franckh.developpez.com/tutoriels/posix/pthreads/pthread.epub" title="Télécharger la version ePub de l'article compatible avec la plupart des liseuses non Kindle (Amazon).">ePub</a></span>, <span class="lientelechargementebook"><a class="lientelechargement" href="http://franckh.developpez.com/tutoriels/posix/pthreads/pthread.azw" title="Télécharger la version Azw spécifique aux liseuses Kindle (Amazon).">Azw</a></span> et <span class="lientelechargementebook"><a class="lientelechargement" href="http://franckh.developpez.com/tutoriels/posix/pthreads/pthread.mobi" title="Télécharger la version Mobi de l'article compatible avec les liseuses Amazon.">Mobi</a></span></p>
</section>
<section class="SectionBookmarks">
<header><h1 class="TitreHeader">Liens&nbsp;sociaux</h1></header>
<div class="InfoBookmarks"><a title="Viadeo" href="http://www.viadeo.com/shareit/share/?url=http%3A%2F%2Ffranckh.developpez.com%2Ftutoriels%2Fposix%2Fpthreads%2F&amp;Title=Initiation+%C3%A0+la+programmation+multit%C3%A2che+en+C+avec+Pthreads" rel="nofollow"><img alt="Viadeo" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/kitbm-viadeo.png"></a>&nbsp;<a title="Twitter" href="http://twitter.com/timeline/home?status=http%3A%2F%2Ffranckh.developpez.com%2Ftutoriels%2Fposix%2Fpthreads%2F" rel="nofollow"><img alt="Twitter" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/kitbm-twitter.png"></a>&nbsp;<a title="Facebook" href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Ffranckh.developpez.com%2Ftutoriels%2Fposix%2Fpthreads%2F" rel="nofollow"><img alt="Facebook" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/kitbm-facebook.png"></a>&nbsp;<a title="Google +" href="https://plus.google.com/share?url=http%3A%2F%2Ffranckh.developpez.com%2Ftutoriels%2Fposix%2Fpthreads%2F" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><img src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/gplus-16.png" alt="Share on Google+"></a>&nbsp;<script src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/in.js" type="text/javascript"> lang: fr_FR</script>
			<span style="line-height: 1; vertical-align: baseline; display: inline-block; text-align: center;" class="IN-widget"><span style="padding: 0px !important; margin: 0px !important; text-indent: 0px !important; display: inline-block !important; vertical-align: baseline !important; font-size: 1px !important;"><span id="li_ui_li_gen_1546098566082_0"><a id="li_ui_li_gen_1546098566082_0-link" href="javascript:void(0);"><span id="li_ui_li_gen_1546098566082_0-logo">in</span><span id="li_ui_li_gen_1546098566082_0-title"><span id="li_ui_li_gen_1546098566082_0-mark"></span><span id="li_ui_li_gen_1546098566082_0-title-text">Partager</span></span></a></span></span></span><script type="IN/Share+init" data-url="$url"></script>&nbsp;</div>
</section></div><section itemprop="articleBody" class="articleBody" style="margin-left: 346px; margin-top: 20px; clear: none;">
    
		<h1 class="TitreSection0" id="LI">I. Introduction<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h1><div class="BlocSection0">
      
      <p>
			La programmation multitâche a toujours été et est toujours, un sujet assez complexe, 
			essentiellement dû au manque de documentation et tutoriels en français !
			<br><br>
			Ce tutoriel ne se veut pas une documentation complète <span class="italique">(il existe des ouvrages dédiés 
			sur ce sujet)</span> mais plutôt une initiation pour vous donner un aperçu de ce qu'il est possible de faire 
			et nous ferons un petit tour d'horizon de la bibliothèque <b>pthread</b> au fil de l'eau.
 			<br><br>
			Nous nous baserons sur un sujet d'exemple unique soit, une gestion correcte d'un stock de magasin 
			et des clients. Le but bien entendu, est que le stock ne descende jamais en-dessous de zéro, ce qui 
			dans la réalité n'est pas faisable donc, si le stock descend à zéro ou si le client courant demande plus 
			de produit qu'il y en a en stock, il faut renflouer celui-ci. Chaque client est représenté par un thread, 
			dans notre exemple nous allons en créer <b>5</b>, la gestion du stock est également un thread 
			supplémentaire.
		</p>
    </div>
    
		<h1 class="TitreSection0" id="LII">II. Avant de commencer<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h1><div class="BlocSection0">
      
      <p>
			La bibliothèque Pthreads est portable, elle existe sur Linux ainsi que sur Windows. Si vous êtes sur Windows, 
			il vous faudra cependant l'installer car elle ne l'est pas d'office sur ce système ! Vous pouvez télécharger la 
			bibliothèque sur le site suivant: <a class="lienArticle En" href="http://sourceware.org/pthreads-win32/" target="_blank">http://sourceware.org/pthreads-win32/</a>.
			<br><br>
			Pour pouvoir compiler un projet <span class="italique">(tous systèmes)</span> avec pthread, il faut pour commencer, ajouter 
			l'en-tête :
		</p>
      <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e139">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e139" onclick="selectionCode('contenuCoded0e139');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e139" class="contenuCode"><code class="c_literal4">#</code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;pthread.h</code><code class="c_literal4">&gt;</code></code></pre></div>
      <p>
			ainsi qu'ajouter à l'éditeur de lien la bibliothèque :
		</p>
      <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e154">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e154" onclick="selectionCode('contenuCoded0e154');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e154" class="contenuCode">-lpthread</code></pre></div>
      <p>
			et spécifier au compilateur la constante :
		</p>
      <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e160">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e160" onclick="selectionCode('contenuCoded0e160');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e160" class="contenuCode">-D_REENTRANT</code></pre></div>
      <p>
			Vous voilà prêt pour compiler des programmes utilisant la bibliothèque Pthreads !
		</p>
      <p class="imgtext-warning">
			Attention, avec le compilateur MingW sous Windows, si vous développez une application C++ 
			utilisant des exceptions, il est nécessaire de compiler et de réaliser l'édition des liens avec l'option <b>-mthreads</b>. 
			En effet, d'origine, les exceptions ne sont pas thread-safe, l'option <span class="italique">mthreads</span> permet qu'elles le soient.
		</p>
      <p class="imgtext-info">
			Les utilisateurs de Linux devront spécifier dans la ligne de compilation des exemples de ce tutoriel, 
			la constante <b>-DLinux</b> et les utilisateurs de Windows <b>-DWin32</b>. Cela sert à prendre 
			en charge de façon portable la mise en pause des portions du code d'exemple. Un fichier Makefile 
			est également disponible pour les utilisateurs de Linux !
		</p>
    </div>
    
		<h1 class="TitreSection0" id="LIII">III. Qu'est-ce qu'un thread ?<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h1><div class="BlocSection0">
      
      <p>
			Un <b>thread</b><span class="italique">(Fil ou encore Fil d'exécution)</span> est une portion de code <span class="italique">(fonction)</span> qui se déroule en parallèle au thread 
			principal (aussi appelé <span class="italique">main</span>). Ce principe est un peu semblable à la fonction 
			<a class="lienArticle simple" href="http://man.developpez.com/man2/fork.2.php" target="_blank">fork</a>
 sur Linux par exemple 
			sauf que nous ne faisons pas de copie du processus père, nous 
définissons des fonctions qui vont se lancer en même temps 
			que le processus, ce qui permet de faire de la programmation 
multitâche. Le but est donc de permettre au programme de réaliser 
plusieurs 
			actions au même moment (imaginez un programme qui fait un gros calcul
 et une barre de progression qui avance en même temps).
			<br><br>
			On peut également considérer un thread comme un processus allégé pour mieux imager le tout ! En comparaison des threads, 
			un fork prend en moyenne 30 fois plus de temps à faire !
		</p>
    </div>
    
		<h1 class="TitreSection0" id="LIV">IV. Création et exécution des threads<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h1><div class="BlocSection0">
      
      
		<h2 class="TitreSection1" id="LIV-A">IV-A. pthread_create<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <p>
				Un thread se créé avec la fonction :
			</p>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e224">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e224" onclick="selectionCode('contenuCoded0e224');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e224" class="contenuCode"><code class="c_keyword3">int</code> pthread_create <code class="c_operator">(</code>pthread_t <code class="c_operator">*</code> thread, pthread_attr_t <code class="c_operator">*</code> attr, <code class="c_keyword3">void</code> <code class="c_operator">*</code> <code class="c_operator">(</code><code class="c_operator">*</code> start_routine) <code class="c_operator">(</code><code class="c_keyword3">void</code> <code class="c_operator">*</code>), <code class="c_keyword3">void</code> <code class="c_operator">*</code> arg); </code></pre></div>
        <p>
				Voyons dans l'ordre, à quoi correspondent ses arguments :
			</p>
        <ol type="1">
          <li>
					Le type <b>pthread_t</b> est un type opaque, sa valeur réelle dépend de l'implémentation <span class="italique">(sur Linux il s'agit en
					générale du type <b>unsigned long</b>)</span>. Ce type correspond à l'identifiant du thread qui sera créé, tout comme 
					les processus on leur propre identifiant.
				</li>
          <li>
					Le type <b>pthread_attr_t</b> est un autre type opaque permettant de définir des attributs spécifiques pour chaque 
					thread mais cela dépasse le cadre de ce tutoriel. Il faut simplement savoir que l'on peut changer le comportement de 
					la gestion des threads comme par exemple, les régler pour qu'ils tournent sur un <span class="italique">système temps réel</span> ! 
					En générale on se contente des attributs par défaut donc en mettant cet argument à NULL.
				</li>
          <li>
					Chaque thread dispose d'une fonction à exécuter, c'est en même temps sa raison de vivre... Cet argument permet 
					de transmettre un pointeur sur la fonction qu'il devra exécuter.
				</li>
          <li>
					Ce dernier argument représente un argument que l'on peut passer à la fonction que le thread doit exécuter.
				</li>
        </ol>
        <p>
				Si la création réussit, la fonction renvoie <b>0</b><span class="italique">(zéro)</span> et l'identifiant du thread nouvellement créé est 
				stocké à l'adresse fournie en premier argument. En cas d'erreur, la valeur <b>EAGAIN</b> est retournée par la fonction 
				s'il n'y a pas assez de ressources système pour créer un nouveau thread ou bien si le nombre maximum de threads définit 
				par la constante <b>PTHREAD_THREADS_MAX</b> est atteint !
			</p>
        <p class="imgtext-warning">
				Le nombre de threads simultanés est limité suivant les systèmes. La constante <b>PTHREAD_THREADS_MAX</b> définie 
				le nombre maximum qui est de <b>1024</b> sur les Unixoïdes !
			</p>
        <p>
				Lorsque le thread est créé, il est lancé immédiatement et exécute la
 fonction passée en troisième argument. L'exécution 
				du thread se fait soit jusqu'à la fin de sa fonction ou bien jusqu'à
 son annulation, c'est ce que nous allons voir au prochain chapitre.
			</p>
        <p class="imgtext-idea">
				Il est possible d'attribuer la même fonction à plusieurs threads !
			</p>
      </div>
    </div>
    
		<h1 class="TitreSection0" id="LV">V. Annulation et fin des threads<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h1><div class="BlocSection0">
      
      
		<h2 class="TitreSection1" id="LV-A">V-A. pthread_exit<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <p>
				On peut arrêter le thread courant avec la fonction :
			</p>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e340">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e340" onclick="selectionCode('contenuCoded0e340');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e340" class="contenuCode"><code class="c_keyword3">void</code> pthread_exit <code class="c_operator">(</code><code class="c_keyword3">void</code> <code class="c_operator">*</code> retval);</code></pre></div>
        <p>
				Son seul argument est le retour de la fonction du thread appelant. Cet argument peut aussi être récupéré par 
				la fonction <b>pthread_join</b> que nous verrons plus bas.
			</p>
      </div>
      
		<h2 class="TitreSection1" id="LV-B">V-B. pthread_cancel<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <p>
				On peut annuler un thread à partir d'un autre à n'importe quel moment avec la fonction :
			</p>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e368">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e368" onclick="selectionCode('contenuCoded0e368');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e368" class="contenuCode"><code class="c_keyword3">int</code> pthread_cancel <code class="c_operator">(</code>pthread_t thread);</code></pre></div>
        <p>
				L'argument de cette fonction est le thread à annuler. Elle renvoie <b>0</b><span class="italique">(zéro)</span> si elle réussie ou 
				la valeur <b>ESRCH</b> si aucun thread ne correspond à celui passé en argument.
			</p>
        <p>
				Il faut cependant être très vigilant lors de l'utilisation de cette fonction. En effet, si le thread dont on demande 
				l'arrêt possède un verrou et ne l'a toujours pas relâché, il y a un risque de laisser ce verrou dans l'état <span class="italique">verrouillé</span>, 
				il sera alors dans ce cas impossible de le récupérer !
				<br><br>
				Pour éviter ce genre de phénomène, on peut avoir recours à une fonction permettant de changer 
				le comportement du thread par rapport aux requêtes d'annulations, ce que nous allons voir ci-dessous ! 
			</p>
        
		<h3 class="TitreSection2" id="LV-B-1">V-B-1. pthread_setcancelstate<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h3><div class="BlocSection2">
          
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e401">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e401" onclick="selectionCode('contenuCoded0e401');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e401" class="contenuCode"><code class="c_keyword3">int</code> pthread_setcancelstate <code class="c_operator">(</code><code class="c_keyword3">int</code> state, <code class="c_keyword3">int</code> <code class="c_operator">*</code> etat_pred);</code></pre></div>
          <p>
					Cette fonction permet de changer le comportement du thread appelant par rapport aux requêtes d'annulations. 
					Ces arguments sont dans l'ordre:
				</p>
          <ul class="ListeDVP">
            <li>
						Etat d'annulation. Il peut prendre les deux valeurs suivantes :
					
                        <b>PTHREAD_CANCEL_ENABLE</b> : Autorise les annulations pour le thread appelant.
							<b>PTHREAD_CANCEL_DISABLE</b> : Désactive les requêtes d'annulation.
							</li>
            <li>
						Adresse vers l'état précédent <span class="italique">(ou NULL)</span> permettant ainsi sa restauration lors d'un prochain appel 
						de la fonction.
					</li>
          </ul>
          <p>
					La fonction renvoie la valeur <b>0</b> en cas de succès ou <b>EINVAL</b> si l'argument ne correspond 
					ni à <span class="italique">PTHREAD_CANCEL_ENABLE</span> et ni à <span class="italique">PTHREAD_CANCEL_DISABLE</span> !
				</p>
        </div>
      </div>
      
		<h2 class="TitreSection1" id="LV-C">V-C. pthread_join<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <p>
				Lorsque nous créons des threads puis nous laissons continuer par exemple la fonction <span class="italique">main</span>, nous prenons 
				le risque de terminer le programme complètement sans avoir pu exécuter les threads. Nous devons en effet attendre 
				que les différents threads créés se terminent. Pour cela, il existe la fonction :
			</p>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e469">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e469" onclick="selectionCode('contenuCoded0e469');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e469" class="contenuCode"><code class="c_keyword3">int</code> pthread_join <code class="c_operator">(</code>pthread_t th, <code class="c_keyword3">void</code> <code class="c_operator">*</code><code class="c_operator">*</code> thread_return);</code></pre></div>
        <p>
				Ses arguments sont dans l'ordre :
			</p>
        <ol type="1">
          <li>
					Le thread à attendre.
				</li>
          <li>
					La valeur de retour de la fonction du thread <b>th</b>.
				</li>
        </ol>
        <p>
				L'appel de cette fonction met en pause l'exécution du thread appelant jusqu'au retour de la fonction. Si aucun problème 
				n'a eu lieu, elle retourne <b>0</b><span class="italique">(zéro)</span> et la valeur de retour du thread est passé à l'adresse indiquée 
				(second argument) si elle est différente de NULL. En cas de problème, la fonction retourne une des valeurs suivantes :
			</p>
        <ul class="ListeDVP">
          <li><b>ESRCH</b> : Aucun thread ne correspond à celui passé en argument.</li>
          <li><b>EINVAL</b> : Le thread a été détaché ou un autre thread attend déjà la fin du même thread.</li>
          <li><b>EDEADLK</b> : Le thread passé en argument correspond au thread appelant.</li>
        </ul>
        <p class="imgtext-info">
				Un thread terminé ne peut être relancé, il faut en créer un nouveau 
car un thread qui touche à sa fin est implicitement détruit !
			</p>
      </div>
    </div>
    
		<h1 class="TitreSection0" id="LVI">VI. Mise en pratique<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h1><div class="BlocSection0">
      
      <p>
			Dans ce programme, nous créons <b>1</b> thread pour la gestion du stock du magasin et <b>5</b> threads pour 
			les clients. Les deux fonctions <b>fn_store</b> et <b>fn_clients</b> sont des boucles infinies <span class="italique">(pour cet exemple mais 
			dans la réalité ca ne sera pas toujours le cas)</span> exécutant les 
mêmes tâches. Les threads clients prennent dans le stock et le 
			thread du magasin va renflouer le stock dès qu'il devient trop bas 
pour satisfaire les clients. Le nombre d'articles pris du stock 
			sont des nombres aléatoires ainsi que l'ordre de passage des clients.
			<br><br>
			Nous pouvons voir qu'à la fin de la fonction <span class="italique">main</span>, nous avons une boucle qui parcourt chaque threads en lançant la fonction 
			<span class="italique">pthread_join</span>. Ceci permet d'attendre la fin des threads et évite donc que le programme ne se termine et quitte 
			prématurément les threads !
		</p>
      
		<h2 class="TitreSection1" id="LVI-A">VI-A. Code complet<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <p>
				Exemple numéro 1. Vous pouvez télécharger l'archive <a class="lienArticle simple" href="https://franckh.developpez.com/tutoriels/posix/pthreads/sources/pthread-exemple-1.zip">ici</a> !
			</p>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e574">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e574" onclick="selectionCode('contenuCoded0e574');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e574" class="contenuCode"><code class="c_literal4">#</code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;stdio.h</code><code class="c_literal4">&gt;</code>
<code class="c_literal4">#</code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;stdlib.h</code><code class="c_literal4">&gt;</code>
<code class="c_literal4">#</code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;pthread.h</code><code class="c_literal4">&gt;</code>
 
<code class="c_literal4">#</code><code class="c_literal4">if</code><code class="c_literal4"> </code><code class="c_literal4">defined</code><code class="c_literal4"> </code><code class="c_literal4">(Win32</code><code class="c_literal4">)</code>
<code class="c_literal4">#</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;windows.h</code><code class="c_literal4">&gt;</code>
<code class="c_literal4">#</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">define</code><code class="c_literal4"> </code><code class="c_literal4">psleep(sec)</code><code class="c_literal4"> </code><code class="c_literal4">Sleep</code><code class="c_literal4"> </code><code class="c_literal4">((sec)</code><code class="c_literal4"> </code><code class="c_literal4">*</code><code class="c_literal4"> </code><code class="c_literal4">1000</code><code class="c_literal4">)</code>
<code class="c_literal4">#</code><code class="c_literal4">elif</code><code class="c_literal4"> </code><code class="c_literal4">defined</code><code class="c_literal4"> </code><code class="c_literal4">(Linux</code><code class="c_literal4">)</code>
<code class="c_literal4">#</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;unistd.h</code><code class="c_literal4">&gt;</code>
<code class="c_literal4">#</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">define</code><code class="c_literal4"> </code><code class="c_literal4">psleep(sec)</code><code class="c_literal4"> </code><code class="c_literal4">sleep</code><code class="c_literal4"> </code><code class="c_literal4">((sec)</code><code class="c_literal4">)</code>
<code class="c_literal4">#</code><code class="c_literal4">endi</code><code class="c_literal4">f</code>
 
<code class="c_literal4">#</code><code class="c_literal4">define</code><code class="c_literal4"> </code><code class="c_literal4">INITIAL_STOCK</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">2</code><code class="c_literal4">0</code>
<code class="c_literal4">#</code><code class="c_literal4">define</code><code class="c_literal4"> </code><code class="c_literal4">NB_CLIENTS</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">5</code>
 
 
<code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Structure</code><code class="c_comment2"> </code><code class="c_comment2">stockant</code><code class="c_comment2"> </code><code class="c_comment2">les</code><code class="c_comment2"> </code><code class="c_comment2">informations</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">threads</code><code class="c_comment2"> </code><code class="c_comment2">clients</code><code class="c_comment2"> </code><code class="c_comment2">et</code><code class="c_comment2"> </code><code class="c_comment2">du</code><code class="c_comment2"> </code><code class="c_comment2">magasin</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
<code class="c_keyword3">typedef</code> <code class="c_keyword3">struct</code>
<code class="c_operator">{</code>
   <code class="c_keyword3">int</code> stock;
 
   pthread_t thread_store;
   pthread_t thread_clients [NB_CLIENTS];
<code class="c_operator">}</code>
store_t;
 
<code class="c_keyword1">static</code> store_t store <code class="c_operator">=</code>
<code class="c_operator">{</code>
   .stock <code class="c_operator">=</code> INITIAL_STOCK,
<code class="c_operator">}</code>;
 
 
<code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Fonction</code><code class="c_comment2"> </code><code class="c_comment2">pour</code><code class="c_comment2"> </code><code class="c_comment2">tirer</code><code class="c_comment2"> </code><code class="c_comment2">un</code><code class="c_comment2"> </code><code class="c_comment2">nombre</code><code class="c_comment2"> </code><code class="c_comment2">au</code><code class="c_comment2"> </code><code class="c_comment2">sort</code><code class="c_comment2"> </code><code class="c_comment2">entre</code><code class="c_comment2"> </code><code class="c_comment2">0</code><code class="c_comment2"> </code><code class="c_comment2">et</code><code class="c_comment2"> </code><code class="c_comment2">max</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
<code class="c_keyword1">static</code> <code class="c_keyword3">int</code> get_random <code class="c_operator">(</code><code class="c_keyword3">int</code> max)
<code class="c_operator">{</code>
   <code class="c_keyword3">double</code> val;
 
   val <code class="c_operator">=</code> <code class="c_operator">(</code><code class="c_keyword3">double</code>) max <code class="c_operator">*</code> rand <code class="c_operator">(</code>);
   val <code class="c_operator">=</code> val <code class="c_operator">/</code> <code class="c_operator">(</code>RAND_MAX <code class="c_operator">+</code> <code class="c_digit">1</code>.<code class="c_digit">0</code>);
 
   <code class="c_keyword1">return</code> <code class="c_operator">(</code><code class="c_operator">(</code><code class="c_keyword3">int</code>) val);
<code class="c_operator">}</code>
 
 
<code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Fonction</code><code class="c_comment2"> </code><code class="c_comment2">pour</code><code class="c_comment2"> </code><code class="c_comment2">le</code><code class="c_comment2"> </code><code class="c_comment2">thread</code><code class="c_comment2"> </code><code class="c_comment2">du</code><code class="c_comment2"> </code><code class="c_comment2">magasin</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
<code class="c_keyword1">static</code> <code class="c_keyword3">void</code> <code class="c_operator">*</code> fn_store <code class="c_operator">(</code><code class="c_keyword3">void</code> <code class="c_operator">*</code> p_data)
<code class="c_operator">{</code>
   <code class="c_keyword1">while</code> <code class="c_operator">(</code><code class="c_digit">1</code>)
   <code class="c_operator">{</code>
      <code class="c_keyword1">if</code> <code class="c_operator">(</code>store.stock <code class="c_operator">&lt;=</code> <code class="c_digit">0</code>)
      <code class="c_operator">{</code>
         store.stock <code class="c_operator">=</code> INITIAL_STOCK;
         printf <code class="c_operator">(</code><code class="c_literal3">"</code><code class="cpp_literal1">Remplissage</code><code class="cpp_literal1"> </code><code class="cpp_literal1">du</code><code class="cpp_literal1"> </code><code class="cpp_literal1">stock</code><code class="cpp_literal1"> </code><code class="cpp_literal1">de</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">articles</code><code class="cpp_literal1"> </code><code class="cpp_literal1">!</code><code class="cpp_literal4">\n</code><code class="c_literal3">"</code>, store.stock);
      <code class="c_operator">}</code>
   <code class="c_operator">}</code>
 
   <code class="c_keyword1">return</code> <code class="c_literal2">NULL</code>;
<code class="c_operator">}</code>
 
 
<code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Fonction</code><code class="c_comment2"> </code><code class="c_comment2">pour</code><code class="c_comment2"> </code><code class="c_comment2">les</code><code class="c_comment2"> </code><code class="c_comment2">threads</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">clients</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
<code class="c_keyword1">static</code> <code class="c_keyword3">void</code> <code class="c_operator">*</code> fn_clients <code class="c_operator">(</code><code class="c_keyword3">void</code> <code class="c_operator">*</code> p_data)
<code class="c_operator">{</code>
   <code class="c_keyword3">int</code> nb <code class="c_operator">=</code> <code class="c_operator">(</code><code class="c_keyword3">int</code>) p_data;
 
   <code class="c_keyword1">while</code> <code class="c_operator">(</code><code class="c_digit">1</code>)
   <code class="c_operator">{</code>
      <code class="c_keyword3">int</code> val <code class="c_operator">=</code> get_random <code class="c_operator">(</code><code class="c_digit">6</code>);
 
      psleep <code class="c_operator">(</code>get_random <code class="c_operator">(</code><code class="c_digit">3</code>));
 
      store.stock <code class="c_operator">=</code> store.stock <code class="c_operator">-</code> val;
      printf <code class="c_operator">(</code>
         <code class="c_literal3">"</code><code class="cpp_literal1">Client</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">prend</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">du</code><code class="cpp_literal1"> </code><code class="cpp_literal1">stock</code><code class="cpp_literal1">,</code><code class="cpp_literal1"> </code><code class="cpp_literal1">reste</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">en</code><code class="cpp_literal1"> </code><code class="cpp_literal1">stock</code><code class="cpp_literal1"> </code><code class="cpp_literal1">!</code><code class="cpp_literal4">\n</code><code class="c_literal3">"</code>,
         nb, val, store.stock
      );
   <code class="c_operator">}</code>
 
   <code class="c_keyword1">return</code> <code class="c_literal2">NULL</code>;
<code class="c_operator">}</code>
 
 
<code class="c_keyword3">int</code> main <code class="c_operator">(</code><code class="c_keyword3">void</code>)
<code class="c_operator">{</code>
   <code class="c_keyword3">int</code> i <code class="c_operator">=</code> <code class="c_digit">0</code>;
   <code class="c_keyword3">int</code> ret <code class="c_operator">=</code> <code class="c_digit">0</code>;
 
 
   <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Creation</code><code class="c_comment2"> </code><code class="c_comment2">du</code><code class="c_comment2"> </code><code class="c_comment2">thread</code><code class="c_comment2"> </code><code class="c_comment2">du</code><code class="c_comment2"> </code><code class="c_comment2">magasin</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
   printf <code class="c_operator">(</code><code class="c_literal3">"</code><code class="cpp_literal1">Creation</code><code class="cpp_literal1"> </code><code class="cpp_literal1">du</code><code class="cpp_literal1"> </code><code class="cpp_literal1">thread</code><code class="cpp_literal1"> </code><code class="cpp_literal1">du</code><code class="cpp_literal1"> </code><code class="cpp_literal1">magasin</code><code class="cpp_literal1"> </code><code class="cpp_literal1">!</code><code class="cpp_literal4">\n</code><code class="c_literal3">"</code>);
   ret <code class="c_operator">=</code> pthread_create <code class="c_operator">(</code>
      <code class="c_operator">&amp;</code> store.thread_store, <code class="c_literal2">NULL</code>,
      fn_store, <code class="c_literal2">NULL</code>
   );
 
   <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Creation</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">threads</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">clients</code><code class="c_comment2"> </code><code class="c_comment2">si</code><code class="c_comment2"> </code><code class="c_comment2">celui</code><code class="c_comment2"> </code><code class="c_comment2">du</code><code class="c_comment2"> </code><code class="c_comment2">magasin</code><code class="c_comment2"> </code><code class="c_comment2">a</code><code class="c_comment2"> </code><code class="c_comment2">reussi</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
   <code class="c_keyword1">if</code> <code class="c_operator">(</code><code class="c_operator">!</code> ret)
   <code class="c_operator">{</code>
      printf <code class="c_operator">(</code><code class="c_literal3">"</code><code class="cpp_literal1">Creation</code><code class="cpp_literal1"> </code><code class="cpp_literal1">des</code><code class="cpp_literal1"> </code><code class="cpp_literal1">threads</code><code class="cpp_literal1"> </code><code class="cpp_literal1">clients</code><code class="cpp_literal1"> </code><code class="cpp_literal1">!</code><code class="cpp_literal4">\n</code><code class="c_literal3">"</code>);
      <code class="c_keyword1">for</code> <code class="c_operator">(</code>i <code class="c_operator">=</code> <code class="c_digit">0</code>; i <code class="c_operator">&lt;</code> NB_CLIENTS; i<code class="c_operator">+</code><code class="c_operator">+</code>)
      <code class="c_operator">{</code>
         ret <code class="c_operator">=</code> pthread_create <code class="c_operator">(</code>
            <code class="c_operator">&amp;</code> store.thread_clients [i], <code class="c_literal2">NULL</code>,
            fn_clients, <code class="c_operator">(</code><code class="c_keyword3">void</code> <code class="c_operator">*</code>) i
         );
 
         <code class="c_keyword1">if</code> <code class="c_operator">(</code>ret)
         <code class="c_operator">{</code>
            fprintf <code class="c_operator">(</code>stderr, <code class="c_literal3">"</code><code class="cpp_literal1">%</code><code class="cpp_literal1">s</code><code class="c_literal3">"</code>, strerror <code class="c_operator">(</code>ret));
         <code class="c_operator">}</code>
      <code class="c_operator">}</code>
   <code class="c_operator">}</code>
   <code class="c_keyword1">else</code>
   <code class="c_operator">{</code>
      fprintf <code class="c_operator">(</code>stderr, <code class="c_literal3">"</code><code class="cpp_literal1">%</code><code class="cpp_literal1">s</code><code class="c_literal3">"</code>, strerror <code class="c_operator">(</code>ret));
   <code class="c_operator">}</code>
 
 
   <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Attente</code><code class="c_comment2"> </code><code class="c_comment2">de</code><code class="c_comment2"> </code><code class="c_comment2">la</code><code class="c_comment2"> </code><code class="c_comment2">fin</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">threads</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
   i <code class="c_operator">=</code> <code class="c_digit">0</code>;
   <code class="c_keyword1">for</code> <code class="c_operator">(</code>i <code class="c_operator">=</code> <code class="c_digit">0</code>; i <code class="c_operator">&lt;</code> NB_CLIENTS; i<code class="c_operator">+</code><code class="c_operator">+</code>)
   <code class="c_operator">{</code>
      pthread_join <code class="c_operator">(</code>store.thread_clients [i], <code class="c_literal2">NULL</code>);
   <code class="c_operator">}</code>
   pthread_join <code class="c_operator">(</code>store.thread_store, <code class="c_literal2">NULL</code>);
 
 
   <code class="c_keyword1">return</code> EXIT_SUCCESS;
<code class="c_operator">}</code></code></pre></div>
        <p class="imgtext-warning">
				L'exemple de code ci-dessus utilise une variable globale ! Ici ce n'est qu'à titre d'exemple mais je 
				vous encourage à éviter ce genre de pratique autant que possible !
			</p>
      </div>
      
		<h2 class="TitreSection1" id="LVI-B">VI-B. Sortie du programme<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <p>
				Voici la sortie du programme sur la console avec annulation utilisateur :
			</p>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e1661">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e1661" onclick="selectionCode('contenuCoded0e1661');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e1661" class="contenuCode">Creation du thread du magasin !
Creation des threads clients !
Client 2 prend 5 du stock, reste 15 en stock !
Client 0 prend 5 du stock, reste 10 en stock !
Client 3 prend 1 du stock, reste 9 en stock !
Client 4 prend 2 du stock, reste 7 en stock !
Client 1 prend 4 du stock, reste 3 en stock !
Client 2 prend 2 du stock, reste 1 en stock !
Client 2 prend 0 du stock, reste 1 en stock !
Client 0 prend 2 du stock, reste -1 en stock !
Remplissage du stock de 20 articles !
Client 1 prend 0 du stock, reste 20 en stock !
Client 1 prend 0 du stock, reste 20 en stock !
Client 1 prend 5 du stock, reste 15 en stock !
Client 0 prend 0 du stock, reste 15 en stock !
Client 0 prend 3 du stock, reste 12 en stock !
Client 3 prend 5 du stock, reste 7 en stock !
Client 4 prend 3 du stock, reste 4 en stock !
Client 2 prend 0 du stock, reste 4 en stock !
Client 0 prend 3 du stock, reste 1 en stock !
Client 1 prend 3 du stock, reste -2 en stock !
Client 3 prend 2 du stock, reste -4 en stock !
Client 4 prend 1 du stock, reste -5 en stock !
Remplissage du stock de 20 articles !
Client 2 prend 3 du stock, reste 17 en stock !
Client 2 prend 3 du stock, reste 14 en stock !
Client 1 prend 1 du stock, reste 13 en stock !
Client 0 prend 2 du stock, reste 11 en stock !
Client 0 prend 0 du stock, reste 11 en stock !
Client 0 prend 2 du stock, reste 9 en stock !
 
&lt;CTRL-C&gt;</code></pre></div>
        <p>
				Et la charge CPU utilisée durant le déroulement du processus et ses threads :
			</p>
        <div class="div-figure"><figure class="figure-center"><a data-rel="lightbox[article]" href="https://franckh.developpez.com/tutoriels/posix/pthreads/images/cpu-exemple-1.png"><img class="ImgCliquable figure-img-caption" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/cpu-exemple-1.png" alt="Image non disponible" width="550" height="85"></a><figcaption class="figure-img-caption TextAlign-center">Charge CPU de l'exemple 1</figcaption></figure></div>
      </div>
      
		<h2 class="TitreSection1" id="LVI-C">VI-C. Observations<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <p>
				Nous pouvons voir grâce à ces données crées lors du déroulement du programme que les clients se 
				servent même si plus aucun produit n'est en stock, le stock est donc durant un court moment en 
				négatif, ce qu'il faut éviter dans la réalité !
				<br><br>
				Non seulement les clients se servent au petit bonheur mais en plus, sans prendre en considération que 
				d'autres clients peuvent également prendre dans le même stock et bien sûr, sans prendre en compte 
				que le magasin peut renflouer son stock quand il est au plus bas.
				<br><br>
				Ceci pour noter une chose importante : Les threads ne tiennent en aucun cas compte qu'une autre 
				fonction puisse également accéder à la même variable <span class="italique">(accès concurrentiels)</span>, en lecture mais 
				aussi en écriture. Cela peut avoir des répercutions dramatiques dans une application critique !
				<br><br>
				Le prochain chapitre va donc aborder la protection pour les accès concurrentiels autrement dit, les <b><span class="italique">mutex</span></b> !
				<br><br>
				En outre, nous pouvons observer la charge CPU utilisée lors du déroulement du programme. On peut noter 
				que les ressources sont utilisées au maximum, ceci surtout dû au fait que la fonction <b>fn_store</b> 
				tourne sans cesse jusqu'à ce qu'on mette fin au programme ! Nous aborderons ce sujet dans la dernière partie 
				de ce tutoriel.
			</p>
      </div>
    </div>
    
		<h1 class="TitreSection0" id="LVII">VII. Les mutex<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h1><div class="BlocSection0">
      
      <p>
			Le<span class="italique">(s)</span><b>mutex</b><span class="italique">(<b>mut</b>ual <b>ex</b>clusion ou zone d'exclusion mutuelle)</span>, est<span class="italique">(sont)</span> un système 
			de verrou donnant ainsi une garantie sur la viabilité des données manipulées par les threads. En effet, il arrive même 
			très souvent que plusieurs threads doivent accéder en lecture et/ou en écriture aux mêmes variables. Si un thread 
			possède le verrou, seulement celui-ci peut lire et écrire sur les variables étant dans la 
			portion de code protégée (aussi appelée <span class="italique">zone critique</span>). Lorsque le thread a terminé, il libère le verrou et un 
			autre thread peut le prendre à son tour.
			<br><br>
			Pour créer un <span class="italique">mutex</span>, il faut tout simplement déclarer une variable du type <b>pthread_mutex_t</b> et 
			l'initialiser avec la constante <b>PTHREAD_MUTEX_INITIALIZER</b> soit par exemple :
		</p>
      <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e1741">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e1741" onclick="selectionCode('contenuCoded0e1741');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e1741" class="contenuCode"><code class="c_keyword1">static</code> pthread_mutex_t mutex_stock <code class="c_operator">=</code> PTHREAD_MUTEX_INITIALIZER;</code></pre></div>
      <p>
			Un mutex n'a que deux états possibles, il est soit verrouillé soit déverrouillé. On utilise les deux fonctions ci-dessous 
			pour changer les états.
		</p>
      
		<h2 class="TitreSection1" id="LVII-A">VII-A. pthread_mutex_lock<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e1757">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e1757" onclick="selectionCode('contenuCoded0e1757');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e1757" class="contenuCode"><code class="c_keyword3">int</code> pthread_mutex_lock <code class="c_operator">(</code>pthread_mutex_t <code class="c_operator">*</code> mutex);</code></pre></div>
        <p>
				Cette fonction permet de déterminer le début d'une <span class="italique">zone critique</span>. Son seul argument est l'adresse 
				d'un <span class="italique">mutex</span> de type <b>pthread_mutex_t</b>. La fonction renvoie <b>0</b> en cas de succès ou 
				l'une des valeurs suivante en cas d'échec:
			</p>
        <ul class="ListeDVP">
          <li><b>EINVAL</b> : mutex non initialisé.
				</li>
          <li><b>EDEADLK</b> : mutex déjà verrouillé par un thread différent.
				</li>
        </ul>
      </div>
      
		<h2 class="TitreSection1" id="LVII-B">VII-B. pthread_mutex_unlock<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e1802">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e1802" onclick="selectionCode('contenuCoded0e1802');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e1802" class="contenuCode"><code class="c_keyword3">int</code> pthread_mutex_unlock <code class="c_operator">(</code>pthread_mutex_t <code class="c_operator">*</code> mutex);</code></pre></div>
        <p>
				Cette fonction permet de relâcher le verrou passé en argument qui est l'adresse 
				d'un <span class="italique">mutex</span> de type <b>pthread_mutex_t</b>. La fonction renvoie <b>0</b> en cas de succès ou 
				l'une des valeurs suivante en cas d'échec:
			</p>
        <ul class="ListeDVP">
          <li><b>EINVAL</b> : mutex non initialisé.
				</li>
          <li><b>EPERM</b> :  le thread n'a pas la main sur le mutex.
				</li>
        </ul>
      </div>
    </div>
    
		<h1 class="TitreSection0" id="LVIII">VIII. Mise en pratique<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h1><div class="BlocSection0">
      
      <p>
			Dans la seconde version de notre exemple, des zones critiques ont étés définies dans les fonctions 
			<b>fn_store</b> et <b>fn_clients</b>. On peut remarquer que nous prenons et libérons le mutex à chaque 
			tour de boucle ce qui permet de ne pas bloquer le programme et ainsi, chaque thread aura l'opportunité de 
			le prendre à son tour pour accomplir sa tâche.
		</p>
      <p class="imgtext-warning">
			Avant chaque arrêt/annulation/fin d'un thread, il ne faut surtout pas oublier de libérer les verrous car vous 
			risquez le cas échéant, d'obtenir ce qu'on appelle un <span class="italique">Dead Lock</span>, le mutex est verrouillé et le restera. 
			Tous les threads voulant l'utiliser vont s'arrêter.
		</p>
      
		<h2 class="TitreSection1" id="LVIII-A">VIII-A. Code complet<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <p>
				Exemple numéro 2. Vous pouvez télécharger l'archive <a class="lienArticle simple" href="https://franckh.developpez.com/tutoriels/posix/pthreads/sources/pthread-exemple-2.zip">ici</a> !
			</p>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e1871">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e1871" onclick="selectionCode('contenuCoded0e1871');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e1871" class="contenuCode"><code class="c_literal4">#</code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;stdio.h</code><code class="c_literal4">&gt;</code>
<code class="c_literal4">#</code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;stdlib.h</code><code class="c_literal4">&gt;</code>
<code class="c_literal4">#</code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;pthread.h</code><code class="c_literal4">&gt;</code>
 
<code class="c_literal4">#</code><code class="c_literal4">if</code><code class="c_literal4"> </code><code class="c_literal4">defined</code><code class="c_literal4"> </code><code class="c_literal4">(Win32</code><code class="c_literal4">)</code>
<code class="c_literal4">#</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;windows.h</code><code class="c_literal4">&gt;</code>
<code class="c_literal4">#</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">define</code><code class="c_literal4"> </code><code class="c_literal4">psleep(sec)</code><code class="c_literal4"> </code><code class="c_literal4">Sleep</code><code class="c_literal4"> </code><code class="c_literal4">((sec)</code><code class="c_literal4"> </code><code class="c_literal4">*</code><code class="c_literal4"> </code><code class="c_literal4">1000</code><code class="c_literal4">)</code>
<code class="c_literal4">#</code><code class="c_literal4">elif</code><code class="c_literal4"> </code><code class="c_literal4">defined</code><code class="c_literal4"> </code><code class="c_literal4">(Linux</code><code class="c_literal4">)</code>
<code class="c_literal4">#</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;unistd.h</code><code class="c_literal4">&gt;</code>
<code class="c_literal4">#</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">define</code><code class="c_literal4"> </code><code class="c_literal4">psleep(sec)</code><code class="c_literal4"> </code><code class="c_literal4">sleep</code><code class="c_literal4"> </code><code class="c_literal4">((sec)</code><code class="c_literal4">)</code>
<code class="c_literal4">#</code><code class="c_literal4">endi</code><code class="c_literal4">f</code>
 
<code class="c_literal4">#</code><code class="c_literal4">define</code><code class="c_literal4"> </code><code class="c_literal4">INITIAL_STOCK</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">2</code><code class="c_literal4">0</code>
<code class="c_literal4">#</code><code class="c_literal4">define</code><code class="c_literal4"> </code><code class="c_literal4">NB_CLIENTS</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">5</code>
 
 
<code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Structure</code><code class="c_comment2"> </code><code class="c_comment2">stockant</code><code class="c_comment2"> </code><code class="c_comment2">les</code><code class="c_comment2"> </code><code class="c_comment2">informations</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">threads</code><code class="c_comment2"> </code><code class="c_comment2">clients</code><code class="c_comment2"> </code><code class="c_comment2">et</code><code class="c_comment2"> </code><code class="c_comment2">du</code><code class="c_comment2"> </code><code class="c_comment2">magasin</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
<code class="c_keyword3">typedef</code> <code class="c_keyword3">struct</code>
<code class="c_operator">{</code>
   <code class="c_keyword3">int</code> stock;
 
   pthread_t thread_store;
   pthread_t thread_clients [NB_CLIENTS];
 
   pthread_mutex_t mutex_stock;
<code class="c_operator">}</code>
store_t;
 
<code class="c_keyword1">static</code> store_t store <code class="c_operator">=</code>
<code class="c_operator">{</code>
   .stock <code class="c_operator">=</code> INITIAL_STOCK,
   .mutex_stock <code class="c_operator">=</code> PTHREAD_MUTEX_INITIALIZER,
<code class="c_operator">}</code>;
 
 
<code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Fonction</code><code class="c_comment2"> </code><code class="c_comment2">pour</code><code class="c_comment2"> </code><code class="c_comment2">tirer</code><code class="c_comment2"> </code><code class="c_comment2">un</code><code class="c_comment2"> </code><code class="c_comment2">nombre</code><code class="c_comment2"> </code><code class="c_comment2">au</code><code class="c_comment2"> </code><code class="c_comment2">sort</code><code class="c_comment2"> </code><code class="c_comment2">entre</code><code class="c_comment2"> </code><code class="c_comment2">0</code><code class="c_comment2"> </code><code class="c_comment2">et</code><code class="c_comment2"> </code><code class="c_comment2">max</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
<code class="c_keyword1">static</code> <code class="c_keyword3">int</code> get_random <code class="c_operator">(</code><code class="c_keyword3">int</code> max)
<code class="c_operator">{</code>
   <code class="c_keyword3">double</code> val;
 
   val <code class="c_operator">=</code> <code class="c_operator">(</code><code class="c_keyword3">double</code>) max <code class="c_operator">*</code> rand <code class="c_operator">(</code>);
   val <code class="c_operator">=</code> val <code class="c_operator">/</code> <code class="c_operator">(</code>RAND_MAX <code class="c_operator">+</code> <code class="c_digit">1</code>.<code class="c_digit">0</code>);
 
   <code class="c_keyword1">return</code> <code class="c_operator">(</code><code class="c_operator">(</code><code class="c_keyword3">int</code>) val);
<code class="c_operator">}</code>
 
 
<code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Fonction</code><code class="c_comment2"> </code><code class="c_comment2">pour</code><code class="c_comment2"> </code><code class="c_comment2">le</code><code class="c_comment2"> </code><code class="c_comment2">thread</code><code class="c_comment2"> </code><code class="c_comment2">du</code><code class="c_comment2"> </code><code class="c_comment2">magasin</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
<code class="c_keyword1">static</code> <code class="c_keyword3">void</code> <code class="c_operator">*</code> fn_store <code class="c_operator">(</code><code class="c_keyword3">void</code> <code class="c_operator">*</code> p_data)
<code class="c_operator">{</code>
   <code class="c_keyword1">while</code> <code class="c_operator">(</code><code class="c_digit">1</code>)
   <code class="c_operator">{</code>
      <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Debut</code><code class="c_comment2"> </code><code class="c_comment2">de</code><code class="c_comment2"> </code><code class="c_comment2">la</code><code class="c_comment2"> </code><code class="c_comment2">zone</code><code class="c_comment2"> </code><code class="c_comment2">protegee</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
      pthread_mutex_lock <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.mutex_stock);
 
      <code class="c_keyword1">if</code> <code class="c_operator">(</code>store.stock <code class="c_operator">&lt;=</code> <code class="c_digit">0</code>)
      <code class="c_operator">{</code>
         store.stock <code class="c_operator">=</code> INITIAL_STOCK;
         printf <code class="c_operator">(</code><code class="c_literal3">"</code><code class="cpp_literal1">Remplissage</code><code class="cpp_literal1"> </code><code class="cpp_literal1">du</code><code class="cpp_literal1"> </code><code class="cpp_literal1">stock</code><code class="cpp_literal1"> </code><code class="cpp_literal1">de</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">articles</code><code class="cpp_literal1"> </code><code class="cpp_literal1">!</code><code class="cpp_literal4">\n</code><code class="c_literal3">"</code>, store.stock);
      <code class="c_operator">}</code>
 
      <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Fin</code><code class="c_comment2"> </code><code class="c_comment2">de</code><code class="c_comment2"> </code><code class="c_comment2">la</code><code class="c_comment2"> </code><code class="c_comment2">zone</code><code class="c_comment2"> </code><code class="c_comment2">protegee</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
      pthread_mutex_unlock <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.mutex_stock);
   <code class="c_operator">}</code>
 
   <code class="c_keyword1">return</code> <code class="c_literal2">NULL</code>;
<code class="c_operator">}</code>
 
 
<code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Fonction</code><code class="c_comment2"> </code><code class="c_comment2">pour</code><code class="c_comment2"> </code><code class="c_comment2">les</code><code class="c_comment2"> </code><code class="c_comment2">threads</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">clients</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
<code class="c_keyword1">static</code> <code class="c_keyword3">void</code> <code class="c_operator">*</code> fn_clients <code class="c_operator">(</code><code class="c_keyword3">void</code> <code class="c_operator">*</code> p_data)
<code class="c_operator">{</code>
   <code class="c_keyword3">int</code> nb <code class="c_operator">=</code> <code class="c_operator">(</code><code class="c_keyword3">int</code>) p_data;
 
   <code class="c_keyword1">while</code> <code class="c_operator">(</code><code class="c_digit">1</code>)
   <code class="c_operator">{</code>
      <code class="c_keyword3">int</code> val <code class="c_operator">=</code> get_random <code class="c_operator">(</code><code class="c_digit">6</code>);
 
 
      <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Debut</code><code class="c_comment2"> </code><code class="c_comment2">de</code><code class="c_comment2"> </code><code class="c_comment2">la</code><code class="c_comment2"> </code><code class="c_comment2">zone</code><code class="c_comment2"> </code><code class="c_comment2">protegee</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
      pthread_mutex_lock <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.mutex_stock);
 
      psleep <code class="c_operator">(</code>get_random <code class="c_operator">(</code><code class="c_digit">3</code>));
 
      store.stock <code class="c_operator">=</code> store.stock <code class="c_operator">-</code> val;
      printf <code class="c_operator">(</code>
         <code class="c_literal3">"</code><code class="cpp_literal1">Client</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">prend</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">du</code><code class="cpp_literal1"> </code><code class="cpp_literal1">stock</code><code class="cpp_literal1">,</code><code class="cpp_literal1"> </code><code class="cpp_literal1">reste</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">en</code><code class="cpp_literal1"> </code><code class="cpp_literal1">stock</code><code class="cpp_literal1"> </code><code class="cpp_literal1">!</code><code class="cpp_literal4">\n</code><code class="c_literal3">"</code>,
         nb, val, store.stock
      );
 
      <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Fin</code><code class="c_comment2"> </code><code class="c_comment2">de</code><code class="c_comment2"> </code><code class="c_comment2">la</code><code class="c_comment2"> </code><code class="c_comment2">zone</code><code class="c_comment2"> </code><code class="c_comment2">protegee</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
      pthread_mutex_unlock <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.mutex_stock);
   <code class="c_operator">}</code>
 
   <code class="c_keyword1">return</code> <code class="c_literal2">NULL</code>;
<code class="c_operator">}</code>
 
 
<code class="c_keyword3">int</code> main <code class="c_operator">(</code><code class="c_keyword3">void</code>)
<code class="c_operator">{</code>
   <code class="c_keyword3">int</code> i <code class="c_operator">=</code> <code class="c_digit">0</code>;
   <code class="c_keyword3">int</code> ret <code class="c_operator">=</code> <code class="c_digit">0</code>;
 
 
   <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Creation</code><code class="c_comment2"> </code><code class="c_comment2">du</code><code class="c_comment2"> </code><code class="c_comment2">thread</code><code class="c_comment2"> </code><code class="c_comment2">du</code><code class="c_comment2"> </code><code class="c_comment2">magasin</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
   printf <code class="c_operator">(</code><code class="c_literal3">"</code><code class="cpp_literal1">Creation</code><code class="cpp_literal1"> </code><code class="cpp_literal1">du</code><code class="cpp_literal1"> </code><code class="cpp_literal1">thread</code><code class="cpp_literal1"> </code><code class="cpp_literal1">du</code><code class="cpp_literal1"> </code><code class="cpp_literal1">magasin</code><code class="cpp_literal1"> </code><code class="cpp_literal1">!</code><code class="cpp_literal4">\n</code><code class="c_literal3">"</code>);
   ret <code class="c_operator">=</code> pthread_create <code class="c_operator">(</code>
      <code class="c_operator">&amp;</code> store.thread_store, <code class="c_literal2">NULL</code>,
      fn_store, <code class="c_literal2">NULL</code>
   );
 
   <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Creation</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">threads</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">clients</code><code class="c_comment2"> </code><code class="c_comment2">si</code><code class="c_comment2"> </code><code class="c_comment2">celui</code><code class="c_comment2"> </code><code class="c_comment2">du</code><code class="c_comment2"> </code><code class="c_comment2">magasinn</code><code class="c_comment2"> </code><code class="c_comment2">a</code><code class="c_comment2"> </code><code class="c_comment2">reussi</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
   <code class="c_keyword1">if</code> <code class="c_operator">(</code><code class="c_operator">!</code> ret)
   <code class="c_operator">{</code>
      printf <code class="c_operator">(</code><code class="c_literal3">"</code><code class="cpp_literal1">Creation</code><code class="cpp_literal1"> </code><code class="cpp_literal1">des</code><code class="cpp_literal1"> </code><code class="cpp_literal1">threads</code><code class="cpp_literal1"> </code><code class="cpp_literal1">clients</code><code class="cpp_literal1"> </code><code class="cpp_literal1">!</code><code class="cpp_literal4">\n</code><code class="c_literal3">"</code>);
      <code class="c_keyword1">for</code> <code class="c_operator">(</code>i <code class="c_operator">=</code> <code class="c_digit">0</code>; i <code class="c_operator">&lt;</code> NB_CLIENTS; i<code class="c_operator">+</code><code class="c_operator">+</code>)
      <code class="c_operator">{</code>
         ret <code class="c_operator">=</code> pthread_create <code class="c_operator">(</code>
            <code class="c_operator">&amp;</code> store.thread_clients [i], <code class="c_literal2">NULL</code>,
            fn_clients, <code class="c_operator">(</code><code class="c_keyword3">void</code> <code class="c_operator">*</code>) i
         );
 
         <code class="c_keyword1">if</code> <code class="c_operator">(</code>ret)
         <code class="c_operator">{</code>
            fprintf <code class="c_operator">(</code>stderr, <code class="c_literal3">"</code><code class="cpp_literal1">%</code><code class="cpp_literal1">s</code><code class="c_literal3">"</code>, strerror <code class="c_operator">(</code>ret));
         <code class="c_operator">}</code>
      <code class="c_operator">}</code>
   <code class="c_operator">}</code>
   <code class="c_keyword1">else</code>
   <code class="c_operator">{</code>
      fprintf <code class="c_operator">(</code>stderr, <code class="c_literal3">"</code><code class="cpp_literal1">%</code><code class="cpp_literal1">s</code><code class="c_literal3">"</code>, strerror <code class="c_operator">(</code>ret));
   <code class="c_operator">}</code>
 
 
   <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Attente</code><code class="c_comment2"> </code><code class="c_comment2">de</code><code class="c_comment2"> </code><code class="c_comment2">la</code><code class="c_comment2"> </code><code class="c_comment2">fin</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">threads</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
   i <code class="c_operator">=</code> <code class="c_digit">0</code>;
   <code class="c_keyword1">for</code> <code class="c_operator">(</code>i <code class="c_operator">=</code> <code class="c_digit">0</code>; i <code class="c_operator">&lt;</code> NB_CLIENTS; i<code class="c_operator">+</code><code class="c_operator">+</code>)
   <code class="c_operator">{</code>
      pthread_join <code class="c_operator">(</code>store.thread_clients [i], <code class="c_literal2">NULL</code>);
   <code class="c_operator">}</code>
   pthread_join <code class="c_operator">(</code>store.thread_store, <code class="c_literal2">NULL</code>);
 
 
   <code class="c_keyword1">return</code> EXIT_SUCCESS;
<code class="c_operator">}</code></code></pre></div>
        <p class="imgtext-warning">
				L'exemple de code ci-dessus utilise une variable globale ! Ici ce n'est qu'à titre d'exemple mais je 
				vous encourage à éviter ce genre de pratique autant que possible !
			</p>
      </div>
      
		<h2 class="TitreSection1" id="LVIII-B">VIII-B. Sortie du programme<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <p>
				Voici la sortie du programme sur la console avec annulation utilisateur :
			</p>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e3097">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e3097" onclick="selectionCode('contenuCoded0e3097');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e3097" class="contenuCode">Creation du thread du magasin !
Creation des threads clients !
Client 2 prend 5 du stock, reste 15 en stock !
Client 0 prend 5 du stock, reste 10 en stock !
Client 3 prend 1 du stock, reste 9 en stock !
Client 4 prend 2 du stock, reste 7 en stock !
Client 1 prend 4 du stock, reste 3 en stock !
Client 2 prend 2 du stock, reste 1 en stock !
Client 2 prend 0 du stock, reste 1 en stock !
Client 0 prend 2 du stock, reste -1 en stock !
Remplissage du stock de 20 articles !
Client 1 prend 0 du stock, reste 20 en stock !
Client 1 prend 0 du stock, reste 20 en stock !
Client 1 prend 5 du stock, reste 15 en stock !
Client 3 prend 5 du stock, reste 10 en stock !
Client 3 prend 3 du stock, reste 7 en stock !
Client 4 prend 3 du stock, reste 4 en stock !
Client 0 prend 0 du stock, reste 4 en stock !
Client 2 prend 0 du stock, reste 4 en stock !
Client 3 prend 3 du stock, reste 1 en stock !
Client 1 prend 3 du stock, reste -2 en stock !
Client 4 prend 2 du stock, reste -4 en stock !
Client 0 prend 1 du stock, reste -5 en stock !
Remplissage du stock de 20 articles !
Client 2 prend 3 du stock, reste 17 en stock !
Client 2 prend 3 du stock, reste 14 en stock !
Client 3 prend 2 du stock, reste 12 en stock !
Client 1 prend 1 du stock, reste 11 en stock !
Client 1 prend 0 du stock, reste 11 en stock !
Client 1 prend 2 du stock, reste 9 en stock !
 
&lt;CTRL-C&gt;</code></pre></div>
        <p>
				Et la charge CPU utilisée durant le déroulement du processus et ses threads :
			</p>
        <div class="div-figure"><figure class="figure-center"><a data-rel="lightbox[article]" href="https://franckh.developpez.com/tutoriels/posix/pthreads/images/cpu-exemple-2.png"><img class="ImgCliquable figure-img-caption" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/cpu-exemple-2.png" alt="Image non disponible" width="550" height="85"></a><figcaption class="figure-img-caption TextAlign-center">Charge CPU de l'exemple 2</figcaption></figure></div>
      </div>
      
		<h2 class="TitreSection1" id="LVIII-C">VIII-C. Observations<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <p>
				Il n'y a pas à vrai dire, de changement radical par rapport à l'affichage du résultat sur 
				la sortie console mais nous avons néanmoins protégé l'accès aux données, ce 
				qui fait un risque en moins. Bien sûr, ce programme d'exemple n'est pas un programme critique 
				mais sur d'autres applications cela peut avoir des effets désastreux !
				<br><br>
				Nous pouvons également remarquer que la charge CPU reste inchangée, le programme prend 
				presque toutes les ressources disponibles du processeur. Pour pallier à ce problème, nous pouvons 
				mettre des threads en attente jusqu'à ce que des conditions de réveil soient remplies ! Nous allons 
				donc étudier dans la partie suivante, les <b><span class="italique">conditions</span></b> !
			</p>
      </div>
    </div>
    
		<h1 class="TitreSection0" id="LIX">IX. Les conditions<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h1><div class="BlocSection0">
      
      <p>
			Les conditions sont un autre mécanisme de synchronisation, le principe est simple. Lorsqu'un thread doit 
			attendre une condition (comme dans notre exemple, le thread du magasin doit attendre que le stock ne suffise 
			plus aux clients pour le renflouer) pour exécuter sa tâche, nous pouvons le mettre en attente. Un autre thread qui 
			possède le verrou réveille alors le thread dormant lorsque la condition est remplie. Tous les threads ne sont pas des 
			boucles infinies, certains sont créés juste pour faire une action précise puis sont automatiquement détruits mais pour 
			d'autres, comme notre exemple,  les conditions sont un atout dans la consommation des ressources car l'attente d'une 
			condition met systématiquement le thread en pause !
			<br><br>
			Créer une condition repose sur le même principe que les mutex à savoir, la création et initialisation d'une variable de 
			type <b>pthread_cond_t</b> soit par exemple:
		</p>
      <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e3137">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e3137" onclick="selectionCode('contenuCoded0e3137');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e3137" class="contenuCode"><code class="c_keyword1">static</code> pthread_cond_t cond_stock <code class="c_operator">=</code> PTHREAD_COND_INITIALIZER;</code></pre></div>
      <p>
			Les conditions reposent essentiellement sur deux fonctions. Une permet de mettre en attente un thread et la 
			seconde permet de signaler que la condition est remplie ce qui réveille alors le thread qui est en attente de cette 
			condition.
		</p>
      <p class="imgtext-idea">
			Plusieurs threads peuvent surveiller la même condition.
		</p>
      <p>
			Les fonctions principales sont les suivantes (elles retournent toutes <b>0</b> mais ne renvoient jamais de code d'erreur) :
		</p>
      
		<h2 class="TitreSection1" id="LIX-A">IX-A. pthread_cond_wait<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e3162">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e3162" onclick="selectionCode('contenuCoded0e3162');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e3162" class="contenuCode"><code class="c_keyword3">int</code> pthread_cond_wait <code class="c_operator">(</code>pthread_cond_t <code class="c_operator">*</code> cond, pthread_mutex_t <code class="c_operator">*</code> mutex);</code></pre></div>
        <p>
				Cette fonction permet de mettre le thread appelant en attente de la condition, il suspend donc son 
				exécution temporairement. Ses deux arguments sont dans l'ordre :
			</p>
        <ul class="ListeDVP">
          <li>
					L'adresse de la variable condition de type <b>pthread_cond_t</b>.
				</li>
          <li>
					L'adresse d'un <span class="italique">mutex</span>. Une condition est en effet, toujours associée à un mutex.
				</li>
        </ul>
      </div>
      
		<h2 class="TitreSection1" id="LIX-B">IX-B. pthread_cond_signal<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e3200">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e3200" onclick="selectionCode('contenuCoded0e3200');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e3200" class="contenuCode"><code class="c_keyword3">int</code> pthread_cond_signal <code class="c_operator">(</code>pthread_cond_t <code class="c_operator">*</code> cond);</code></pre></div>
        <p><span class="italique">pthread_cond_signal</span> est la fonction qui permet de signaler la condition au thread qui l'attend. 
				Elle prend en paramètre l'adresse de la variable-condition surveillée. Cette fonction ne permet de 
				réveiller qu'un seul thread. Pour en réveiller d'avantage, il faut utiliser la fonction ci-dessous.
			</p>
      </div>
      
		<h2 class="TitreSection1" id="LIX-C">IX-C. pthread_cond_broadcast<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e3222">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e3222" onclick="selectionCode('contenuCoded0e3222');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e3222" class="contenuCode"><code class="c_keyword3">int</code> pthread_cond_broadcast <code class="c_operator">(</code>pthread_cond_t <code class="c_operator">*</code> cond);</code></pre></div>
        <p>
				Comme il l'a été signalé plus haut, plusieurs threads peuvent surveiller la même condition. Cette 
				fonction permet de tous les réveiller. Tout comme <span class="italique">pthread_cond_signal</span>, elle prend en 
				paramètre l'adresse de la variable-condition surveillée.
			</p>
      </div>
    </div>
    
		<h1 class="TitreSection0" id="LX">X. Mise en pratique<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h1><div class="BlocSection0">
      
      <p>
			Le raisonnement de notre programme change à partir de maintenant. En effet, prenons le cas d'un client 
			<b>X</b> qui veut prendre <b>N</b> articles du stock du magasin. Si le stock ne suffit pas, le magasin 
			doit le renflouer mais cependant, le client doit attendre que le stock soit suffisant pour satisfaire sa demande.
			<br><br>
			Le client signal donc au magasin qu'il doit remplir à nouveau son stock et en attendant, il se met en attente. Une 
			fois que le magasin a renfloué son stock, il le signal au client en attente et se met à nouveau lui-même en attente 
			jusqu'à ce que la condition soit de nouveau signalée !
			<br><br>
			Quelques changements ont donc eu lieu dans notre programme. Nous avons pour commencer, deux variables-conditions 
			qui viennent s'ajouter à notre structure, une pour les clients et une pour le magasin. La raison en est simple, lorsque le 
			magasin remplit son stock, le client en cours doit attendre que le stock soit à nouveau à un niveau correct, ceci permet 
			d'éviter qu'il descende à un chiffre négatif, nous gardons de ce fait un cheminement logique pour notre programme. Des 
			changements ont aussi été faits sur les deux fonctions <b>fn_store</b> et <b>fn_clients</b>. 
		</p>
      
		<h2 class="TitreSection1" id="LX-A">X-A. Fonction : fn_store<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e3272">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e3272" onclick="selectionCode('contenuCoded0e3272');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e3272" class="contenuCode"><code class="c_keyword1">static</code> <code class="c_keyword3">void</code> <code class="c_operator">*</code> fn_store <code class="c_operator">(</code><code class="c_keyword3">void</code> <code class="c_operator">*</code> p_data)
<code class="c_operator">{</code>
   <code class="c_keyword1">while</code> <code class="c_operator">(</code><code class="c_digit">1</code>)
   <code class="c_operator">{</code>
      pthread_mutex_lock <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.mutex_stock);
      pthread_cond_wait <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.cond_stock, <code class="c_operator">&amp;</code> store.mutex_stock);
 
      store.stock <code class="c_operator">=</code> INITIAL_STOCK;
      printf <code class="c_operator">(</code><code class="c_literal3">"</code><code class="cpp_literal1">Remplissage</code><code class="cpp_literal1"> </code><code class="cpp_literal1">du</code><code class="cpp_literal1"> </code><code class="cpp_literal1">stock</code><code class="cpp_literal1"> </code><code class="cpp_literal1">de</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">articles</code><code class="cpp_literal1"> </code><code class="cpp_literal1">!</code><code class="cpp_literal4">\n</code><code class="c_literal3">"</code>, store.stock);
 
      pthread_cond_signal <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.cond_clients);
      pthread_mutex_unlock <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.mutex_stock);
   <code class="c_operator">}</code>
 
   <code class="c_keyword1">return</code> <code class="c_literal2">NULL</code>;
<code class="c_operator">}</code></code></pre></div>
        <p>
				Le thread attendant que la condition soit remplie pour s'activer, nous n'avons plus besoin du test à l'intérieur 
				de la boucle, nous pouvons donc directement remplir le stock. Nous pouvons voir un processus particulier en ce 
				qui concerne les conditions. En effet, si on regarde le début du corps de la boucle, on peut s'apercevoir que le 
				thread prend le mutex et se met en attente de la condition. En réalité, le thread relâche le mutex aussitôt et 
				le reprend automatiquement lorsque la condition est vraie et qu'il soit réveillé par un autre thread. Lorsque la stock 
				est remplit, la fonction le signale au thread du client courant.
			</p>
      </div>
      
		<h2 class="TitreSection1" id="LX-B">X-B. Fonction : fn_clients<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e3388">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e3388" onclick="selectionCode('contenuCoded0e3388');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e3388" class="contenuCode"><code class="c_keyword1">static</code> <code class="c_keyword3">void</code> <code class="c_operator">*</code> fn_clients <code class="c_operator">(</code><code class="c_keyword3">void</code> <code class="c_operator">*</code> p_data)
<code class="c_operator">{</code>
   <code class="c_keyword3">int</code> nb <code class="c_operator">=</code> <code class="c_operator">(</code><code class="c_keyword3">int</code>) p_data;
 
   <code class="c_keyword1">while</code> <code class="c_operator">(</code><code class="c_digit">1</code>)
   <code class="c_operator">{</code>
      <code class="c_keyword3">int</code> val <code class="c_operator">=</code> get_random <code class="c_operator">(</code><code class="c_digit">6</code>);
 
 
      psleep <code class="c_operator">(</code>get_random <code class="c_operator">(</code><code class="c_digit">3</code>));
      pthread_mutex_lock <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.mutex_stock);
 
      <code class="c_keyword1">if</code> <code class="c_operator">(</code>val <code class="c_operator">&gt;</code> store.stock)
      <code class="c_operator">{</code>
         pthread_cond_signal <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.cond_stock);
         pthread_cond_wait <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.cond_clients, <code class="c_operator">&amp;</code> store.mutex_stock);
      <code class="c_operator">}</code>
 
      store.stock <code class="c_operator">=</code> store.stock <code class="c_operator">-</code> val;
      printf <code class="c_operator">(</code>
         <code class="c_literal3">"</code><code class="cpp_literal1">Client</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">prend</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">du</code><code class="cpp_literal1"> </code><code class="cpp_literal1">stock</code><code class="cpp_literal1">,</code><code class="cpp_literal1"> </code><code class="cpp_literal1">reste</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">en</code><code class="cpp_literal1"> </code><code class="cpp_literal1">stock</code><code class="cpp_literal1"> </code><code class="cpp_literal1">!</code><code class="cpp_literal4">\n</code><code class="c_literal3">"</code>,
         nb, val, store.stock
      );
 
      pthread_mutex_unlock <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.mutex_stock);
   <code class="c_operator">}</code>
 
   <code class="c_keyword1">return</code> <code class="c_literal2">NULL</code>;
<code class="c_operator">}</code></code></pre></div>
        <p>
				Cette fonction a aussi eu droit à un petit lifting. En effet, un test a été rajouté qui permet de déterminer si 
				le stock est en quantité suffisante par rapport à la demande du client. Si ce n'est pas le cas, le thread le 
				signal au thread du magasin qui prend le relais, le thread appelant ce met en attente le temps que le magasin 
				réalise sa tâche.
			</p>
      </div>
      
		<h2 class="TitreSection1" id="LX-C">X-C. Code complet<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <p>
				Exemple numéro 3. Vous pouvez télécharger l'archive <a class="lienArticle simple" href="https://franckh.developpez.com/tutoriels/posix/pthreads/sources/pthread-exemple-3.zip">ici</a> !
			</p>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e3581">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e3581" onclick="selectionCode('contenuCoded0e3581');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e3581" class="contenuCode"><code class="c_literal4">#</code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;stdio.h</code><code class="c_literal4">&gt;</code>
<code class="c_literal4">#</code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;stdlib.h</code><code class="c_literal4">&gt;</code>
<code class="c_literal4">#</code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;pthread.h</code><code class="c_literal4">&gt;</code>
 
<code class="c_literal4">#</code><code class="c_literal4">if</code><code class="c_literal4"> </code><code class="c_literal4">defined</code><code class="c_literal4"> </code><code class="c_literal4">(Win32</code><code class="c_literal4">)</code>
<code class="c_literal4">#</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;windows.h</code><code class="c_literal4">&gt;</code>
<code class="c_literal4">#</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">define</code><code class="c_literal4"> </code><code class="c_literal4">psleep(sec)</code><code class="c_literal4"> </code><code class="c_literal4">Sleep</code><code class="c_literal4"> </code><code class="c_literal4">((sec)</code><code class="c_literal4"> </code><code class="c_literal4">*</code><code class="c_literal4"> </code><code class="c_literal4">1000</code><code class="c_literal4">)</code>
<code class="c_literal4">#</code><code class="c_literal4">elif</code><code class="c_literal4"> </code><code class="c_literal4">defined</code><code class="c_literal4"> </code><code class="c_literal4">(Linux</code><code class="c_literal4">)</code>
<code class="c_literal4">#</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">include</code><code class="c_literal4"> </code><code class="c_literal4">&lt;unistd.h</code><code class="c_literal4">&gt;</code>
<code class="c_literal4">#</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">define</code><code class="c_literal4"> </code><code class="c_literal4">psleep(sec)</code><code class="c_literal4"> </code><code class="c_literal4">sleep</code><code class="c_literal4"> </code><code class="c_literal4">((sec)</code><code class="c_literal4">)</code>
<code class="c_literal4">#</code><code class="c_literal4">endi</code><code class="c_literal4">f</code>
 
<code class="c_literal4">#</code><code class="c_literal4">define</code><code class="c_literal4"> </code><code class="c_literal4">INITIAL_STOCK</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">2</code><code class="c_literal4">0</code>
<code class="c_literal4">#</code><code class="c_literal4">define</code><code class="c_literal4"> </code><code class="c_literal4">NB_CLIENTS</code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4"> </code><code class="c_literal4">5</code>
 
 
<code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Structure</code><code class="c_comment2"> </code><code class="c_comment2">stockant</code><code class="c_comment2"> </code><code class="c_comment2">les</code><code class="c_comment2"> </code><code class="c_comment2">informations</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">threads</code><code class="c_comment2"> </code><code class="c_comment2">clients</code><code class="c_comment2"> </code><code class="c_comment2">et</code><code class="c_comment2"> </code><code class="c_comment2">du</code><code class="c_comment2"> </code><code class="c_comment2">magasin</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
<code class="c_keyword3">typedef</code> <code class="c_keyword3">struct</code>
<code class="c_operator">{</code>
   <code class="c_keyword3">int</code> stock;
 
   pthread_t thread_store;
   pthread_t thread_clients [NB_CLIENTS];
 
   pthread_mutex_t mutex_stock;
   pthread_cond_t cond_stock;
   pthread_cond_t cond_clients;
<code class="c_operator">}</code>
store_t;
 
<code class="c_keyword1">static</code> store_t store <code class="c_operator">=</code>
<code class="c_operator">{</code>
   .stock <code class="c_operator">=</code> INITIAL_STOCK,
   .mutex_stock <code class="c_operator">=</code> PTHREAD_MUTEX_INITIALIZER,
   .cond_stock <code class="c_operator">=</code> PTHREAD_COND_INITIALIZER,
   .cond_clients <code class="c_operator">=</code> PTHREAD_COND_INITIALIZER,
<code class="c_operator">}</code>;
 
 
<code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Fonction</code><code class="c_comment2"> </code><code class="c_comment2">pour</code><code class="c_comment2"> </code><code class="c_comment2">tirer</code><code class="c_comment2"> </code><code class="c_comment2">un</code><code class="c_comment2"> </code><code class="c_comment2">nombre</code><code class="c_comment2"> </code><code class="c_comment2">au</code><code class="c_comment2"> </code><code class="c_comment2">sort</code><code class="c_comment2"> </code><code class="c_comment2">entre</code><code class="c_comment2"> </code><code class="c_comment2">0</code><code class="c_comment2"> </code><code class="c_comment2">et</code><code class="c_comment2"> </code><code class="c_comment2">max</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
<code class="c_keyword1">static</code> <code class="c_keyword3">int</code> get_random <code class="c_operator">(</code><code class="c_keyword3">int</code> max)
<code class="c_operator">{</code>
   <code class="c_keyword3">double</code> val;
 
   val <code class="c_operator">=</code> <code class="c_operator">(</code><code class="c_keyword3">double</code>) max <code class="c_operator">*</code> rand <code class="c_operator">(</code>);
   val <code class="c_operator">=</code> val <code class="c_operator">/</code> <code class="c_operator">(</code>RAND_MAX <code class="c_operator">+</code> <code class="c_digit">1</code>.<code class="c_digit">0</code>);
 
   <code class="c_keyword1">return</code> <code class="c_operator">(</code><code class="c_operator">(</code><code class="c_keyword3">int</code>) val);
<code class="c_operator">}</code>
 
 
<code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Fonction</code><code class="c_comment2"> </code><code class="c_comment2">pour</code><code class="c_comment2"> </code><code class="c_comment2">le</code><code class="c_comment2"> </code><code class="c_comment2">thread</code><code class="c_comment2"> </code><code class="c_comment2">du</code><code class="c_comment2"> </code><code class="c_comment2">magasin</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
<code class="c_keyword1">static</code> <code class="c_keyword3">void</code> <code class="c_operator">*</code> fn_store <code class="c_operator">(</code><code class="c_keyword3">void</code> <code class="c_operator">*</code> p_data)
<code class="c_operator">{</code>
   <code class="c_keyword1">while</code> <code class="c_operator">(</code><code class="c_digit">1</code>)
   <code class="c_operator">{</code>
      <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Debut</code><code class="c_comment2"> </code><code class="c_comment2">de</code><code class="c_comment2"> </code><code class="c_comment2">la</code><code class="c_comment2"> </code><code class="c_comment2">zone</code><code class="c_comment2"> </code><code class="c_comment2">protegee</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
      pthread_mutex_lock <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.mutex_stock);
      pthread_cond_wait <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.cond_stock, <code class="c_operator">&amp;</code> store.mutex_stock);
 
      store.stock <code class="c_operator">=</code> INITIAL_STOCK;
      printf <code class="c_operator">(</code><code class="c_literal3">"</code><code class="cpp_literal1">Remplissage</code><code class="cpp_literal1"> </code><code class="cpp_literal1">du</code><code class="cpp_literal1"> </code><code class="cpp_literal1">stock</code><code class="cpp_literal1"> </code><code class="cpp_literal1">de</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">articles</code><code class="cpp_literal1"> </code><code class="cpp_literal1">!</code><code class="cpp_literal4">\n</code><code class="c_literal3">"</code>, store.stock);
 
      pthread_cond_signal <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.cond_clients);
      pthread_mutex_unlock <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.mutex_stock);
      <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Fin</code><code class="c_comment2"> </code><code class="c_comment2">de</code><code class="c_comment2"> </code><code class="c_comment2">la</code><code class="c_comment2"> </code><code class="c_comment2">zone</code><code class="c_comment2"> </code><code class="c_comment2">protegee</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
   <code class="c_operator">}</code>
 
   <code class="c_keyword1">return</code> <code class="c_literal2">NULL</code>;
<code class="c_operator">}</code>
 
 
<code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Fonction</code><code class="c_comment2"> </code><code class="c_comment2">pour</code><code class="c_comment2"> </code><code class="c_comment2">les</code><code class="c_comment2"> </code><code class="c_comment2">threads</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">clients</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
<code class="c_keyword1">static</code> <code class="c_keyword3">void</code> <code class="c_operator">*</code> fn_clients <code class="c_operator">(</code><code class="c_keyword3">void</code> <code class="c_operator">*</code> p_data)
<code class="c_operator">{</code>
   <code class="c_keyword3">int</code> nb <code class="c_operator">=</code> <code class="c_operator">(</code><code class="c_keyword3">int</code>) p_data;
 
   <code class="c_keyword1">while</code> <code class="c_operator">(</code><code class="c_digit">1</code>)
   <code class="c_operator">{</code>
      <code class="c_keyword3">int</code> val <code class="c_operator">=</code> get_random <code class="c_operator">(</code><code class="c_digit">6</code>);
 
 
      psleep <code class="c_operator">(</code>get_random <code class="c_operator">(</code><code class="c_digit">3</code>));
 
      <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Debut</code><code class="c_comment2"> </code><code class="c_comment2">de</code><code class="c_comment2"> </code><code class="c_comment2">la</code><code class="c_comment2"> </code><code class="c_comment2">zone</code><code class="c_comment2"> </code><code class="c_comment2">protegee</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
      pthread_mutex_lock <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.mutex_stock);
 
      <code class="c_keyword1">if</code> <code class="c_operator">(</code>val <code class="c_operator">&gt;</code> store.stock)
      <code class="c_operator">{</code>
         pthread_cond_signal <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.cond_stock);
         pthread_cond_wait <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.cond_clients, <code class="c_operator">&amp;</code> store.mutex_stock);
      <code class="c_operator">}</code>
 
      store.stock <code class="c_operator">=</code> store.stock <code class="c_operator">-</code> val;
      printf <code class="c_operator">(</code>
         <code class="c_literal3">"</code><code class="cpp_literal1">Client</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">prend</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">du</code><code class="cpp_literal1"> </code><code class="cpp_literal1">stock</code><code class="cpp_literal1">,</code><code class="cpp_literal1"> </code><code class="cpp_literal1">reste</code><code class="cpp_literal1"> </code><code class="cpp_literal1">%</code><code class="cpp_literal1">d</code><code class="cpp_literal1"> </code><code class="cpp_literal1">en</code><code class="cpp_literal1"> </code><code class="cpp_literal1">stock</code><code class="cpp_literal1"> </code><code class="cpp_literal1">!</code><code class="cpp_literal4">\n</code><code class="c_literal3">"</code>,
         nb, val, store.stock
      );
 
      pthread_mutex_unlock <code class="c_operator">(</code><code class="c_operator">&amp;</code> store.mutex_stock);
      <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Fin</code><code class="c_comment2"> </code><code class="c_comment2">de</code><code class="c_comment2"> </code><code class="c_comment2">la</code><code class="c_comment2"> </code><code class="c_comment2">zone</code><code class="c_comment2"> </code><code class="c_comment2">protegee</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
   <code class="c_operator">}</code>
 
   <code class="c_keyword1">return</code> <code class="c_literal2">NULL</code>;
<code class="c_operator">}</code>
 
 
<code class="c_keyword3">int</code> main <code class="c_operator">(</code><code class="c_keyword3">void</code>)
<code class="c_operator">{</code>
   <code class="c_keyword3">int</code> i <code class="c_operator">=</code> <code class="c_digit">0</code>;
   <code class="c_keyword3">int</code> ret <code class="c_operator">=</code> <code class="c_digit">0</code>;
 
 
   <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Creation</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">threads</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
   printf <code class="c_operator">(</code><code class="c_literal3">"</code><code class="cpp_literal1">Creation</code><code class="cpp_literal1"> </code><code class="cpp_literal1">du</code><code class="cpp_literal1"> </code><code class="cpp_literal1">thread</code><code class="cpp_literal1"> </code><code class="cpp_literal1">du</code><code class="cpp_literal1"> </code><code class="cpp_literal1">magasin</code><code class="cpp_literal1"> </code><code class="cpp_literal1">!</code><code class="cpp_literal4">\n</code><code class="c_literal3">"</code>);
   ret <code class="c_operator">=</code> pthread_create <code class="c_operator">(</code>
      <code class="c_operator">&amp;</code> store.thread_store, <code class="c_literal2">NULL</code>,
      fn_store, <code class="c_literal2">NULL</code>
   );
 
   <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Creation</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">threads</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">clients</code><code class="c_comment2"> </code><code class="c_comment2">si</code><code class="c_comment2"> </code><code class="c_comment2">celui</code><code class="c_comment2"> </code><code class="c_comment2">du</code><code class="c_comment2"> </code><code class="c_comment2">magasinn</code><code class="c_comment2"> </code><code class="c_comment2">a</code><code class="c_comment2"> </code><code class="c_comment2">reussi</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
   <code class="c_keyword1">if</code> <code class="c_operator">(</code><code class="c_operator">!</code> ret)
   <code class="c_operator">{</code>
      printf <code class="c_operator">(</code><code class="c_literal3">"</code><code class="cpp_literal1">Creation</code><code class="cpp_literal1"> </code><code class="cpp_literal1">des</code><code class="cpp_literal1"> </code><code class="cpp_literal1">threads</code><code class="cpp_literal1"> </code><code class="cpp_literal1">clients</code><code class="cpp_literal1"> </code><code class="cpp_literal1">!</code><code class="cpp_literal4">\n</code><code class="c_literal3">"</code>);
      <code class="c_keyword1">for</code> <code class="c_operator">(</code>i <code class="c_operator">=</code> <code class="c_digit">0</code>; i <code class="c_operator">&lt;</code> NB_CLIENTS; i<code class="c_operator">+</code><code class="c_operator">+</code>)
      <code class="c_operator">{</code>
         ret <code class="c_operator">=</code> pthread_create <code class="c_operator">(</code>
            <code class="c_operator">&amp;</code> store.thread_clients [i], <code class="c_literal2">NULL</code>,
            fn_clients, <code class="c_operator">(</code><code class="c_keyword3">void</code> <code class="c_operator">*</code>) i);
 
         <code class="c_keyword1">if</code> <code class="c_operator">(</code>ret)
         <code class="c_operator">{</code>
            fprintf <code class="c_operator">(</code>stderr, <code class="c_literal3">"</code><code class="cpp_literal1">%</code><code class="cpp_literal1">s</code><code class="c_literal3">"</code>, strerror <code class="c_operator">(</code>ret));
         <code class="c_operator">}</code>
      <code class="c_operator">}</code>
   <code class="c_operator">}</code>
   <code class="c_keyword1">else</code>
   <code class="c_operator">{</code>
      fprintf <code class="c_operator">(</code>stderr, <code class="c_literal3">"</code><code class="cpp_literal1">%</code><code class="cpp_literal1">s</code><code class="c_literal3">"</code>, strerror <code class="c_operator">(</code>ret));
   <code class="c_operator">}</code>
 
 
   <code class="c_comment2">/*</code><code class="c_comment2"> </code><code class="c_comment2">Attente</code><code class="c_comment2"> </code><code class="c_comment2">de</code><code class="c_comment2"> </code><code class="c_comment2">la</code><code class="c_comment2"> </code><code class="c_comment2">fin</code><code class="c_comment2"> </code><code class="c_comment2">des</code><code class="c_comment2"> </code><code class="c_comment2">threads</code><code class="c_comment2">.</code><code class="c_comment2"> </code><code class="c_comment2">*/</code>
   i <code class="c_operator">=</code> <code class="c_digit">0</code>;
   <code class="c_keyword1">for</code> <code class="c_operator">(</code>i <code class="c_operator">=</code> <code class="c_digit">0</code>; i <code class="c_operator">&lt;</code> NB_CLIENTS; i<code class="c_operator">+</code><code class="c_operator">+</code>)
   <code class="c_operator">{</code>
      pthread_join <code class="c_operator">(</code>store.thread_clients [i], <code class="c_literal2">NULL</code>);
   <code class="c_operator">}</code>
   pthread_join <code class="c_operator">(</code>store.thread_store, <code class="c_literal2">NULL</code>);
 
 
   <code class="c_keyword1">return</code> EXIT_SUCCESS;
<code class="c_operator">}</code></code></pre></div>
        <p class="imgtext-warning">
				L'exemple de code ci-dessus utilise une variable globale ! Ici ce n'est qu'à titre d'exemple mais je 
				vous encourage à éviter ce genre de pratique autant que possible !
			</p>
      </div>
      
		<h2 class="TitreSection1" id="LX-D">X-D. Sortie du programme<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <p>
				Voici la sortie du programme sur la console avec annulation utilisateur :
			</p>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e4828">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e4828" onclick="selectionCode('contenuCoded0e4828');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e4828" class="contenuCode">Creation du thread du magasin !
Creation des threads clients !
Client 2 prend 5 du stock, reste 15 en stock !
Client 0 prend 5 du stock, reste 10 en stock !
Client 3 prend 1 du stock, reste 9 en stock !
Client 4 prend 2 du stock, reste 7 en stock !
Client 1 prend 4 du stock, reste 3 en stock !
Client 0 prend 2 du stock, reste 1 en stock !
Client 0 prend 0 du stock, reste 1 en stock !
Remplissage du stock de 20 articles !
Client 2 prend 2 du stock, reste 18 en stock !
Client 1 prend 0 du stock, reste 18 en stock !
Client 1 prend 0 du stock, reste 18 en stock !
Client 1 prend 5 du stock, reste 13 en stock !
Client 2 prend 0 du stock, reste 13 en stock !
Client 1 prend 3 du stock, reste 10 en stock !
Client 3 prend 5 du stock, reste 5 en stock !
Client 4 prend 3 du stock, reste 2 en stock !
Client 0 prend 0 du stock, reste 2 en stock !
Remplissage du stock de 20 articles !
Client 1 prend 3 du stock, reste 17 en stock !
Client 2 prend 3 du stock, reste 14 en stock !
Client 3 prend 2 du stock, reste 12 en stock !
Client 4 prend 1 du stock, reste 11 en stock !
Client 0 prend 3 du stock, reste 8 en stock !
Client 2 prend 1 du stock, reste 7 en stock !
Client 2 prend 3 du stock, reste 4 en stock !
Client 1 prend 2 du stock, reste 2 en stock !
Client 0 prend 0 du stock, reste 2 en stock !
Client 0 prend 2 du stock, reste 0 en stock !
Remplissage du stock de 20 articles !
Client 1 prend 5 du stock, reste 15 en stock !
Client 2 prend 1 du stock, reste 14 en stock !
Client 3 prend 4 du stock, reste 10 en stock !
Client 4 prend 0 du stock, reste 10 en stock !
 
&lt;CTRL-C&gt;</code></pre></div>
        <p>
				Et la charge CPU utilisée durant le déroulement du processus et ses threads :
			</p>
        <div class="div-figure"><figure class="figure-center"><a data-rel="lightbox[article]" href="https://franckh.developpez.com/tutoriels/posix/pthreads/images/cpu-exemple-3.png"><img class="ImgCliquable figure-img-caption" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/cpu-exemple-3.png" alt="Image non disponible" width="550" height="85"></a><figcaption class="figure-img-caption TextAlign-center">Charge CPU de l'exemple 3</figcaption></figure></div>
      </div>
      
		<h2 class="TitreSection1" id="LX-E">X-E. Observations<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <p>
				Hormis les changements importants dans notre programme d'exemple, on peut apercevoir que maintenant 
				dans le graphique de la charge CPU, les ressources sont utilisées de façon raisonnable. Ceci est dû au fait 
				que le thread du magasin soit mis en attente et ne tourne donc plus en continu tout le long de la durée de 
				vie du programme, les conditions peuvent donc jouer un rôle important dans ce domaine !
				<br><br>
				On peut également voir sur la sortie console que le stock ne descend plus à une valeur en-dessous de zéro.
			</p>
      </div>
    </div>
    
		<h1 class="TitreSection0" id="LXI">XI. Test des threads<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h1><div class="BlocSection0">
      
      <p>
			Il existe des fonctions permettant de tester des threads entre eux. Les threads étant des types opaques, il est 
			recommandé de les utiliser ! Nous avons à disposition, par exemple, une fonction pour réaliser un test d'égalité entre deux 
			identifiants de threads ou même récupérer l'identifiant d'un thread. Voici ces deux fonctions qui peuvent 
			avoir leur utilité :
		</p>
      
		<h2 class="TitreSection1" id="LXI-A">XI-A. pthread_equal<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e4863">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e4863" onclick="selectionCode('contenuCoded0e4863');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e4863" class="contenuCode"><code class="c_keyword3">int</code> pthread_equal <code class="c_operator">(</code>pthread_t thread1, pthread_t thread2);</code></pre></div>
        <p>
				Cette fonction teste l'égalité entre deux identifiants de threads passés en argument. 
				La fonction renvoie <b>0</b> si les deux threads sont différents, une valeur non nulle s'il sont identiques.
			</p>
      </div>
      
		<h2 class="TitreSection1" id="LXI-B">XI-B. pthread_self<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection1">
        
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e4883">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e4883" onclick="selectionCode('contenuCoded0e4883');">Sélectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e4883" class="contenuCode">pthread_t pthread_self <code class="c_operator">(</code><code class="c_keyword3">void</code>);</code></pre></div>
        <p>
				Cette fonction retourne l'identifiant du thread appelant.
			</p>
      </div>
    </div>
    
		<h1 class="TitreSection0" id="LXII">XII. Conclusion<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h1><div class="BlocSection0">
      
      <p>
			Nous avons vu dans ce tutoriel comment créer des threads, que sont les mutex et les conditions et comment les utiliser. 
			Nous avons aussi parcouru en vitesse quelques fonctions supplémentaires. Ceci n'est bien sûr qu'un petit avant-goût de la 
			bibliothèque Pthreads, des ouvrages complets sur ce thème existent, notamment :
			<br><br><a class="lienArticle En" href="http://www.oreilly.com/catalog/pthread/index.html#top" target="_blank">PThreads Programming</a><br><br>
			Il n'existe malheureusement pas de livres en français ! Vous pouvez néanmoins poser vos questions sur le forum 
			<a class="lienArticle simple" href="http://www.developpez.net/forums/forumdisplay.php?f=18" target="_blank">C</a> de 
			<a class="lienArticle simple" href="http://www.developpez.com/" target="_blank">developpez.com</a> ;)
		</p>
    </div>
    
		<h1 class="TitreSection0" id="LXIII">XIII. Remerciements<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h1><div class="BlocSection0">
      
      <p>
			Un très grand merci à 
			<a class="lienArticle https" href="https://www.developpez.net/forums/u67052/alp/">Alp</a>, 
			<a class="lienArticle https" href="https://www.developpez.net/forums/u103584/millie/">millie</a>, 
			<a class="lienArticle https" href="https://www.developpez.net/forums/u57639/skyounet/">Skyrunner</a> 
			pour leur avis et suggestions ainsi qu'à 
			<a class="lienArticle https" href="https://www.developpez.net/forums/u50863/jannus/">Guardian</a> et 
			<a class="lienArticle https" href="https://www.developpez.net/forums/u116373/ridekick/">RideKick</a> 
			pour la relecture et correction de ce tutoriel !
		</p>
    </div>
  </section><section class="articleBody" style="margin-left: 346px; margin-top: 20px; clear: none;"><p>Vous avez aimé ce tutoriel&nbsp;? Alors partagez-le en cliquant sur les boutons suivants&nbsp;: <a title="Viadeo" href="http://www.viadeo.com/shareit/share/?url=http%3A%2F%2Ffranckh.developpez.com%2Ftutoriels%2Fposix%2Fpthreads%2F&amp;Title=Initiation+%C3%A0+la+programmation+multit%C3%A2che+en+C+avec+Pthreads" rel="nofollow"><img alt="Viadeo" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/kitbm-viadeo.png"></a>&nbsp;<a title="Twitter" href="http://twitter.com/timeline/home?status=http%3A%2F%2Ffranckh.developpez.com%2Ftutoriels%2Fposix%2Fpthreads%2F" rel="nofollow"><img alt="Twitter" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/kitbm-twitter.png"></a>&nbsp;<a title="Facebook" href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Ffranckh.developpez.com%2Ftutoriels%2Fposix%2Fpthreads%2F" rel="nofollow"><img alt="Facebook" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/kitbm-facebook.png"></a>&nbsp;<a title="Google +" href="https://plus.google.com/share?url=http%3A%2F%2Ffranckh.developpez.com%2Ftutoriels%2Fposix%2Fpthreads%2F" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><img src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/gplus-16.png" alt="Share on Google+"></a>&nbsp;<script src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/in.js" type="text/javascript"> lang: fr_FR</script>
			<span style="line-height: 1; vertical-align: baseline; display: inline-block; text-align: center;" class="IN-widget"><span style="padding: 0px !important; margin: 0px !important; text-indent: 0px !important; display: inline-block !important; vertical-align: baseline !important; font-size: 1px !important;"><span id="li_ui_li_gen_1546098566105_1"><a id="li_ui_li_gen_1546098566105_1-link" href="javascript:void(0);"><span id="li_ui_li_gen_1546098566105_1-logo">in</span><span id="li_ui_li_gen_1546098566105_1-title"><span id="li_ui_li_gen_1546098566105_1-mark"></span><span id="li_ui_li_gen_1546098566105_1-title-text">Partager</span></span></a></span></span></span><script type="IN/Share+init" data-url="$url"></script>&nbsp;</p></section>
</article>
		<div class="clear">&nbsp;&nbsp;</div>
<img src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/compter-3.gif" alt="" width="1" height="1"><script type="text/javascript" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/show_i_002"></script><script type="text/javascript" src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/show_i"></script><script type="text/javascript">var fb=0;if(!document.getElementById("RLISlqbpEKnU")){fb=1;var c=document.createElement("img");c.src="https://compteur.developpez.com/spe-1";c.style="position: absolute; left: 3px; top: 2px";document.body.appendChild(c);}else{var c=document.createElement("img");c.src="https://compteur.developpez.com/spe-0";c.style="position: absolute; left: 3px; top: 2px";document.body.appendChild(c);}var Xfb=0;if(!document.getElementById("iZa4cCaP9NJh")){Xfb=1;var c=document.createElement("img");c.src="https://compteur.developpez.com/spea-1";c.style="position: absolute; left: 4px; top: 3px";document.body.appendChild(c);}else{var c=document.createElement("img");c.src="https://compteur.developpez.com/spea-0";c.style="position: absolute; left: 4px; top: 3px";document.body.appendChild(c);}</script><script type="text/javascript">$(function(){$("#wj3fh0z").load("/template/wj3fh0z"+fb+".jpg");$("#du3yv1r").load("/template/du3yv1r"+fb+".jpg");});</script>
<style type="text/css">@media screen and (max-width: 975px) { #wj3fh0z, #du3yv1r { display:none !important; } }</style>
<p class="licence" style="">Copyright © 2007 Franck Hecht.
Aucune reproduction, même partielle, ne peut être faite
de ce site ni de l'ensemble de son contenu&nbsp;: textes, documents, images, etc.
sans l'autorisation expresse de l'auteur. Sinon vous encourez selon la loi jusqu'à
trois ans de prison et jusqu'à 300&nbsp;000&nbsp; de dommages et intérêts.
</p>
</div>
</section><div id="RLISlqbpEKnU" style="display: none;"></div><img src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/spe-0.gif" style="position: absolute; left: 3px; top: 2px;"><img src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/spea-1.gif" style="position: absolute; left: 4px; top: 3px;">

<footer>
<div id="gabarit_responsable">
		<a href="https://club.developpez.com/contacts/contribuer">Contacter</a> le responsable de la rubrique C
	</div>

<ul id="gabarit_pied">
	<li><a href="https://club.developpez.com/contacts/">Nous contacter</a>
	</li><li><a href="https://www.developpez.com/participez/">Participez</a>
	</li><li><a href="https://www.developpez.com/hebergement/">Hébergement</a>
	</li><li><a href="https://www.developpez.com/legal/">Informations légales</a>
	</li><li>Partenaire : <a href="https://www.planethoster.com/fr/" target="_blank">Hébergement Web</a>
</li></ul>

<p id="gabarit_copyright">Copyright © 2000-2018 - www.developpez.com</p>

</footer>
<!-- Google Analytics gÃ©nÃ©ral -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-28115938-1']);
  _gaq.push(['_setDomainName', 'developpez.com']);
  _gaq.push(['_setCustomVar', 1, 'rubrique', 'c', 3]);
  _gaq.push(['_setCustomVar', 2, 'type', 'Tutoriel', 3]);
  _gaq.push(['_trackPageview']);

  (function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>



	<script type="text/javascript">
	$(function() {
		if (document.cookie.indexOf("cnilcookie=1") == -1) {
			$("<div>").html("En utilisant ce site, vous acceptez l'utilisation de cookies permettant de vous proposer des contenus et des services adapt&eacute;s &agrave; vos centres d'int&eacute;r&ecirc;ts - <u>J'accepte</u>").attr("id", "gabarit_cnilcookie").appendTo("body").click(function() {
				$("#gabarit_cnilcookie").remove();
				var expDate = new Date();
				expDate.setTime(expDate.getTime() + (395 * 24 * 3600 * 1000));
				document.cookie = "cnilcookie=1;expires=" + expDate.toGMTString() + ";domain=.developpez.com;path=/";
			});
		}
	});
	</script>



		
<div id="lightboxOverlay" style="display: none;"></div><div id="lightbox" style="display: none;"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image"><div class="lb-nav"><a class="lb-prev"></a><a class="lb-next"></a></div><div class="lb-loader"><a class="lb-cancel"><img src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/lightbox-ico-loading.png"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"><img src="Tutoriel%20%20%20Les%20Threads%20et%20Mutex_fichiers/lightbox-btn-close.png"></a></div></div></div></div></body></html>